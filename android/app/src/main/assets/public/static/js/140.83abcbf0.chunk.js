/*! For license information please see 140.83abcbf0.chunk.js.LICENSE.txt */
(self.webpackChunktheway=self.webpackChunktheway||[]).push([[140],{8140:function(t,e,r){r.r(e),r.d(e,{CapacitorGoogleMapsWeb:function(){return X}});var n=r(4165),i=r(5861),o=r(7762),a=r(5671),s=r(3144),u=r(136),c=r(9388),l=r(6653),p=r(885),h=r(2982),d=r(8262),f=r.n(d);function m(t,e,r,n,i,o){if(!(i-n<=r)){var a=n+i>>1;v(t,e,a,n,i,o%2),m(t,e,r,n,a-1,o+1),m(t,e,r,a+1,i,o+1)}}function v(t,e,r,n,i,o){for(;i>n;){if(i-n>600){var a=i-n+1,s=r-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);v(t,e,r,Math.max(n,Math.floor(r-s*c/a+l)),Math.min(i,Math.floor(r+(a-s)*c/a+l)),o)}var p=e[2*r+o],h=n,d=i;for(g(t,e,n,r),e[2*i+o]>p&&g(t,e,n,i);h<d;){for(g(t,e,h,d),h++,d--;e[2*h+o]<p;)h++;for(;e[2*d+o]>p;)d--}e[2*n+o]===p?g(t,e,n,d):g(t,e,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1)}}function g(t,e,r,n){k(t,r,n),k(e,2*r,2*n),k(e,2*r+1,2*n+1)}function k(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n){var i=t-r,o=e-n;return i*i+o*o}var Z,w=function(t){return t[0]},M=function(t){return t[1]},x=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;(0,a.Z)(this,t),this.nodeSize=i,this.points=e;for(var s=e.length<65536?Uint16Array:Uint32Array,u=this.ids=new s(e.length),c=this.coords=new o(2*e.length),l=0;l<e.length;l++)u[l]=l,c[2*l]=r(e[l]),c[2*l+1]=n(e[l]);m(u,c,i,0,u.length-1,0)}return(0,s.Z)(t,[{key:"range",value:function(t,e,r,n){return function(t,e,r,n,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var p=c.pop(),h=c.pop(),d=c.pop();if(h-d<=a)for(var f=d;f<=h;f++)s=e[2*f],u=e[2*f+1],s>=r&&s<=i&&u>=n&&u<=o&&l.push(t[f]);else{var m=Math.floor((d+h)/2);s=e[2*m],u=e[2*m+1],s>=r&&s<=i&&u>=n&&u<=o&&l.push(t[m]);var v=(p+1)%2;(0===p?r<=s:n<=u)&&(c.push(d),c.push(m-1),c.push(v)),(0===p?i>=s:o>=u)&&(c.push(m+1),c.push(h),c.push(v))}}return l}(this.ids,this.coords,t,e,r,n,this.nodeSize)}},{key:"within",value:function(t,e,r){return function(t,e,r,n,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var c=a.pop(),l=a.pop(),p=a.pop();if(l-p<=o)for(var h=p;h<=l;h++)y(e[2*h],e[2*h+1],r,n)<=u&&s.push(t[h]);else{var d=Math.floor((p+l)/2),f=e[2*d],m=e[2*d+1];y(f,m,r,n)<=u&&s.push(t[d]);var v=(c+1)%2;(0===c?r-i<=f:n-i<=m)&&(a.push(p),a.push(d-1),a.push(v)),(0===c?r+i>=f:n+i>=m)&&(a.push(d+1),a.push(l),a.push(v))}}return s}(this.ids,this.coords,t,e,r,this.nodeSize)}}]),t}(),b={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},C=Math.fround||(Z=new Float32Array(1),function(t){return Z[0]=+t,Z[0]}),L=function(){function t(e){(0,a.Z)(this,t),this.options=T(Object.create(b),e),this.trees=new Array(this.options.maxZoom+1)}return(0,s.Z)(t,[{key:"load",value:function(t){var e=this.options,r=e.log,n=e.minZoom,i=e.maxZoom,o=e.nodeSize;r&&console.time("total time");var a="prepare ".concat(t.length," points");r&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(P(t[u],u));this.trees[i+1]=new x(s,j,A,o,Float32Array),r&&console.timeEnd(a);for(var c=i;c>=n;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new x(s,j,A,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return r&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(t,e){var r=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,i=180;else if(r>i){var s=this.getClusters([r,n,180,a],e),u=this.getClusters([-180,n,i,a],e);return s.concat(u)}var c,l=this.trees[this._limitZoom(e)],p=l.range(O(r),z(a),O(i),z(n)),h=[],d=(0,o.Z)(p);try{for(d.s();!(c=d.n()).done;){var f=c.value,m=l.points[f];h.push(m.numPoints?_(m):this.points[m.index])}}catch(v){d.e(v)}finally{d.f()}return h}},{key:"getChildren",value:function(t){var e=this._getOriginId(t),r=this._getOriginZoom(t),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var a=i.points[e];if(!a)throw new Error(n);var s,u=this.options.radius/(this.options.extent*Math.pow(2,r-1)),c=i.within(a.x,a.y,u),l=[],p=(0,o.Z)(c);try{for(p.s();!(s=p.n()).done;){var h=s.value,d=i.points[h];d.parentId===t&&l.push(d.numPoints?_(d):this.points[d.index])}}catch(f){p.e(f)}finally{p.f()}if(0===l.length)throw new Error(n);return l}},{key:"getLeaves",value:function(t,e,r){e=e||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,r,0),n}},{key:"getTile",value:function(t,e,r){var n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,u=(r-s)/i,c=(r+1+s)/i,l={features:[]};return this._addTileFeatures(n.range((e-s)/i,u,(e+1+s)/i,c),n.points,e,r,i,l),0===e&&this._addTileFeatures(n.range(1-s/i,u,1,c),n.points,i,r,i,l),e===i-1&&this._addTileFeatures(n.range(0,u,s/i,c),n.points,-1,r,i,l),l.features.length?l:null}},{key:"getClusterExpansionZoom",value:function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e}},{key:"_appendLeaves",value:function(t,e,r,n,i){var a,s=this.getChildren(e),u=(0,o.Z)(s);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.properties;if(l&&l.cluster?i+l.point_count<=n?i+=l.point_count:i=this._appendLeaves(t,l.cluster_id,r,n,i):i<n?i++:t.push(c),t.length===r)break}}catch(p){u.e(p)}finally{u.f()}return i}},{key:"_addTileFeatures",value:function(t,e,r,n,i,a){var s,u=(0,o.Z)(t);try{for(u.s();!(s=u.n()).done;){var c=e[s.value],l=c.numPoints,p=void 0,h=void 0,d=void 0;if(l)p=E(c),h=c.x,d=c.y;else{var f=this.points[c.index];p=f.properties,h=O(f.geometry.coordinates[0]),d=z(f.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*i-r)),Math.round(this.options.extent*(d*i-n))]],tags:p},v=void 0;l?v=c.id:this.options.generateId?v=c.index:this.points[c.index].id&&(v=this.points[c.index].id),void 0!==v&&(m.id=v),a.features.push(m)}}catch(g){u.e(g)}finally{u.f()}}},{key:"_limitZoom",value:function(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}},{key:"_cluster",value:function(t,e){for(var r=[],n=this.options,i=n.radius,a=n.extent,s=n.reduce,u=n.minPoints,c=i/(a*Math.pow(2,e)),l=0;l<t.length;l++){var p=t[l];if(!(p.zoom<=e)){p.zoom=e;var h,d=this.trees[e+1],f=d.within(p.x,p.y,c),m=p.numPoints||1,v=m,g=(0,o.Z)(f);try{for(g.s();!(h=g.n()).done;){var k=h.value,y=d.points[k];y.zoom>e&&(v+=y.numPoints||1)}}catch(T){g.e(T)}finally{g.f()}if(v>m&&v>=u){var Z,w=p.x*m,M=p.y*m,x=s&&m>1?this._map(p,!0):null,b=(l<<5)+(e+1)+this.points.length,C=(0,o.Z)(f);try{for(C.s();!(Z=C.n()).done;){var L=Z.value,P=d.points[L];if(!(P.zoom<=e)){P.zoom=e;var _=P.numPoints||1;w+=P.x*_,M+=P.y*_,P.parentId=b,s&&(x||(x=this._map(p,!0)),s(x,this._map(P)))}}}catch(T){C.e(T)}finally{C.f()}p.parentId=b,r.push(I(w/v,M/v,b,v,x))}else if(r.push(p),v>1){var E,O=(0,o.Z)(f);try{for(O.s();!(E=O.n()).done;){var z=E.value,S=d.points[z];S.zoom<=e||(S.zoom=e,r.push(S))}}catch(T){O.e(T)}finally{O.f()}}}}return r}},{key:"_getOriginId",value:function(t){return t-this.points.length>>5}},{key:"_getOriginZoom",value:function(t){return(t-this.points.length)%32}},{key:"_map",value:function(t,e){if(t.numPoints)return e?T({},t.properties):t.properties;var r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?T({},n):n}}]),t}();function I(t,e,r,n,i){return{x:C(t),y:C(e),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function P(t,e){var r=(0,p.Z)(t.geometry.coordinates,2),n=r[0],i=r[1];return{x:C(O(n)),y:C(z(i)),zoom:1/0,index:e,parentId:-1}}function _(t){return{type:"Feature",id:t.id,properties:E(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),S(t.y)]}};var e}function E(t){var e=t.numPoints,r=e>=1e4?"".concat(Math.round(e/1e3),"k"):e>=1e3?"".concat(Math.round(e/100)/10,"k"):e;return T(T({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function O(t){return t/360+.5}function z(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function S(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function T(t,e){for(var r in e)t[r]=e[r];return t}function j(t){return t.x}function A(t){return t.y}function B(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}var F=function(){function t(e){var r=e.markers,n=e.position;(0,a.Z)(this,t),this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}return(0,s.Z)(t,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(t,e){return t.extend(e.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(t){return t.getVisible()})).length}},{key:"push",value:function(t){this.markers.push(t)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),t}(),G=function(){function t(e){var r=e.maxZoom,n=void 0===r?16:r;(0,a.Z)(this,t),this.maxZoom=n}return(0,s.Z)(t,[{key:"noop",value:function(t){var e=t.markers;return N(e)}}]),t}(),N=function(t){return t.map((function(t){return new F({position:t.getPosition(),markers:[t]})}))},R=function(t){(0,u.Z)(r,t);var e=(0,c.Z)(r);function r(t){var n;(0,a.Z)(this,r);var i=t.maxZoom,o=t.radius,s=void 0===o?60:o,u=B(t,["maxZoom","radius"]);return(n=e.call(this,{maxZoom:i})).superCluster=new L(Object.assign({maxZoom:n.maxZoom,radius:s},u)),n.state={zoom:null},n}return(0,s.Z)(r,[{key:"calculate",value:function(t){var e=!1;if(!f()(t.markers,this.markers)){e=!0,this.markers=(0,h.Z)(t.markers);var r=this.markers.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.getPosition().lng(),t.getPosition().lat()]},properties:{marker:t}}}));this.superCluster.load(r)}var n={zoom:t.map.getZoom()};return e||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(e=e||!f()(this.state,n)),this.state=n,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}},{key:"cluster",value:function(t){var e=t.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(t){var e=(0,p.Z)(t.geometry.coordinates,2),r=e[0],n=e[1],i=t.properties;if(i.cluster)return new F({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map((function(t){return t.properties.marker})),position:new google.maps.LatLng({lat:n,lng:r})});var o=i.marker;return new F({markers:[o],position:o.getPosition()})}}]),r}(G),U=(0,s.Z)((function t(e,r){(0,a.Z)(this,t),this.markers={sum:e.length};var n=r.map((function(t){return t.count})),i=n.reduce((function(t,e){return t+e}),0);this.clusters={count:r.length,markers:{mean:i/r.length,sum:i,min:Math.min.apply(Math,(0,h.Z)(n)),max:Math.max.apply(Math,(0,h.Z)(n))}}})),D=function(){function t(){(0,a.Z)(this,t)}return(0,s.Z)(t,[{key:"render",value:function(t,e){var r=t.count,n=t.position,i=r>Math.max(10,e.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa('\n  <svg fill="'.concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:n,icon:{url:"data:image/svg+xml;base64,".concat(o),scaledSize:new google.maps.Size(45,45)},label:{text:String(r),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(r," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+r})}}]),t}();var H,K=(0,s.Z)((function t(){(0,a.Z)(this,t),function(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}(t,google.maps.OverlayView)}));!function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"}(H||(H={}));var W=function(t,e,r){r.fitBounds(e.bounds)},V=function(t){(0,u.Z)(r,t);var e=(0,c.Z)(r);function r(t){var n,i=t.map,o=t.markers,s=void 0===o?[]:o,u=t.algorithm,c=void 0===u?new R({}):u,l=t.renderer,p=void 0===l?new D():l,d=t.onClusterClick,f=void 0===d?W:d;return(0,a.Z)(this,r),(n=e.call(this)).markers=(0,h.Z)(s),n.clusters=[],n.algorithm=c,n.renderer=p,n.onClusterClick=f,i&&n.setMap(i),n}return(0,s.Z)(r,[{key:"addMarker",value:function(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}},{key:"addMarkers",value:function(t,e){var r=this;t.forEach((function(t){r.addMarker(t,!0)})),e||this.render()}},{key:"removeMarker",value:function(t,e){var r=this.markers.indexOf(t);return-1!==r&&(t.setMap(null),this.markers.splice(r,1),e||this.render(),!0)}},{key:"removeMarkers",value:function(t,e){var r=this,n=!1;return t.forEach((function(t){n=r.removeMarker(t,!0)||n})),n&&!e&&this.render(),n}},{key:"clearMarkers",value:function(t){this.markers.length=0,t||this.render()}},{key:"render",value:function(){var t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,H.CLUSTERING_BEGIN,this);var e=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()}),r=e.clusters,n=e.changed;(n||void 0==n)&&(this.reset(),this.clusters=r,this.renderClusters()),google.maps.event.trigger(this,H.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(t){return t.setMap(null)})),this.clusters.forEach((function(t){return t.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var t=this,e=new U(this.markers,this.clusters),r=this.getMap();this.clusters.forEach((function(n){1===n.markers.length?n.marker=n.markers[0]:(n.marker=t.renderer.render(n,e),t.onClusterClick&&n.marker.addListener("click",(function(e){google.maps.event.trigger(t,H.CLUSTER_CLICK,n),t.onClusterClick(e,n,r)}))),n.marker.setMap(r)}))}}]),r}(K),X=function(t){(0,u.Z)(l,t);var e=(0,c.Z)(l);function l(){var t;return(0,a.Z)(this,l),(t=e.apply(this,arguments)).gMapsRef=void 0,t.maps={},t.currMarkerId=0,t.onClusterClickHandler=function(e,r,n){var i,a,s=t.getIdFromMap(n),u=[];if(void 0!=r.markers){var c,l=(0,o.Z)(r.markers);try{for(l.s();!(c=l.n()).done;){var p=c.value,h=t.getIdFromMarker(s,p);u.push({markerId:h,latitude:null===(i=p.getPosition())||void 0===i?void 0:i.lat(),longitude:null===(a=p.getPosition())||void 0===a?void 0:a.lng(),title:p.getTitle(),snippet:""})}}catch(d){l.e(d)}finally{l.f()}}t.notifyListeners("onClusterClick",{mapId:s,latitude:r.position.lat(),longitude:r.position.lng(),size:r.count,items:u})},t}return(0,s.Z)(l,[{key:"getIdFromMap",value:function(t){for(var e in this.maps)if(this.maps[e].map==t)return e;return""}},{key:"getIdFromMarker",value:function(t,e){for(var r in this.maps[t].markers)if(this.maps[t].markers[r]==e)return r;return""}},{key:"importGoogleLib",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var i,o,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.gMapsRef){t.next=10;break}return t.next=3,r.e(614).then(r.bind(r,5614));case 3:return i=t.sent,o=new i.Loader({apiKey:null!==e&&void 0!==e?e:"",version:"weekly",libraries:["places"]}),t.next=7,o.load();case 7:a=t.sent,this.gMapsRef=a.maps,console.log("Loaded google maps API");case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setCamera",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.maps[e.id].map.moveCamera({center:e.config.coordinate,heading:e.config.bearing,tilt:e.config.angle,zoom:e.config.zoom});case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setMapType",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.maps[e.id].map.setMapTypeId(e.mapType);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"enableIndoorMaps",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not supported on web.");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"enableTrafficLayer",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=null!==(r=this.maps[e.id].trafficLayer)&&void 0!==r?r:new google.maps.TrafficLayer(),e.enabled?(i.setMap(this.maps[e.id].map),this.maps[e.id].trafficLayer=i):this.maps[e.id].trafficLayer&&(i.setMap(null),this.maps[e.id].trafficLayer=void 0);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"enableAccessibilityElements",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not supported on web.");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"dispatchMapEvent",value:function(t){throw new Error("Method not supported on web.")}},{key:"enableCurrentLocation",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.enabled){t.next=6;break}if(!navigator.geolocation){t.next=5;break}navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};r.maps[e.id].map.setCenter(n),r.notifyListeners("onMyLocationButtonClick",{}),r.notifyListeners("onMyLocationClick",{})}),(function(){throw new Error("Geolocation not supported on web browser.")})),t.next=6;break;case 5:throw new Error("Geolocation not supported on web browser.");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"setPadding",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!==(r=this.maps[e.id].map.getBounds())&&this.maps[e.id].map.fitBounds(r,e.padding);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getMapBounds",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.maps[e.id].map.getBounds()){t.next=3;break}throw new Error("Google Map Bounds could not be found.");case 3:return t.abrupt("return",{southwest:{lat:r.getSouthWest().lat(),lng:r.getSouthWest().lng()},center:{lat:r.getCenter().lat(),lng:r.getCenter().lng()},northeast:{lat:r.getNorthEast().lat(),lng:r.getNorthEast().lng()}});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addMarkers",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,i,a,s,u,c,l,p;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=this.maps[e.id],a=(0,o.Z)(e.markers);try{for(a.s();!(s=a.n()).done;)u=s.value,c=this.buildMarkerOpts(u,i.map),l=new google.maps.Marker(c),p=""+this.currMarkerId,i.markers[p]=l,this.setMarkerListeners(e.id,p,l),r.push(p),this.currMarkerId++}catch(n){a.e(n)}finally{a.f()}return t.abrupt("return",{ids:r});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addMarker",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,i,o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.buildMarkerOpts(e.marker,this.maps[e.id].map),i=new google.maps.Marker(r),o=""+this.currMarkerId,this.maps[e.id].markers[o]=i,this.setMarkerListeners(e.id,o,i),this.currMarkerId++,t.abrupt("return",{id:o});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"removeMarkers",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,i,a,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.maps[e.id],i=(0,o.Z)(e.markerIds);try{for(i.s();!(a=i.n()).done;)s=a.value,r.markers[s].setMap(null),delete r.markers[s]}catch(n){i.e(n)}finally{i.f()}case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"removeMarker",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.maps[e.id].markers[e.markerId].setMap(null),delete this.maps[e.id].markers[e.markerId];case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"enableClustering",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in r=[],this.maps[e.id].markers)r.push(this.maps[e.id].markers[i]);this.maps[e.id].markerClusterer=new V({map:this.maps[e.id].map,markers:r,onClusterClick:this.onClusterClickHandler});case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disableClustering",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(r=this.maps[e.id].markerClusterer)||void 0===r||r.setMap(null),this.maps[e.id].markerClusterer=void 0;case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onScroll",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not supported on web.");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"create",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Create map: ".concat(e.id)),t.next=3,this.importGoogleLib(e.apiKey);case 3:this.maps[e.id]={map:new window.google.maps.Map(e.element,Object.assign({},e.config)),element:e.element,markers:{}},this.setMapListeners(e.id);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Destroy map: ".concat(e.id)),(r=this.maps[e.id]).element.innerHTML="",r.map.unbindAll(),delete this.maps[e.id];case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setMarkerListeners",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e,r,i){var o=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.addListener("click",(function(){var t,n;o.notifyListeners("onMarkerClick",{mapId:e,markerId:r,latitude:null===(t=i.getPosition())||void 0===t?void 0:t.lat(),longitude:null===(n=i.getPosition())||void 0===n?void 0:n.lng(),title:i.getTitle(),snippet:""})})),i.addListener("dragstart",(function(){var t,n;o.notifyListeners("onMarkerDragStart",{mapId:e,markerId:r,latitude:null===(t=i.getPosition())||void 0===t?void 0:t.lat(),longitude:null===(n=i.getPosition())||void 0===n?void 0:n.lng(),title:i.getTitle(),snippet:""})})),i.addListener("drag",(function(){var t,n;o.notifyListeners("onMarkerDrag",{mapId:e,markerId:r,latitude:null===(t=i.getPosition())||void 0===t?void 0:t.lat(),longitude:null===(n=i.getPosition())||void 0===n?void 0:n.lng(),title:i.getTitle(),snippet:""})})),i.addListener("dragend",(function(){var t,n;o.notifyListeners("onMarkerDragEnd",{mapId:e,markerId:r,latitude:null===(t=i.getPosition())||void 0===t?void 0:t.lat(),longitude:null===(n=i.getPosition())||void 0===n?void 0:n.lng(),title:i.getTitle(),snippet:""})}));case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"setMapListeners",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){var r,o=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=this.maps[e].map).addListener("idle",(0,i.Z)((0,n.Z)().mark((function t(){var i,a,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getMapBounds({id:e});case 2:s=t.sent,o.notifyListeners("onCameraIdle",{mapId:e,bearing:r.getHeading(),bounds:s,latitude:null===(i=r.getCenter())||void 0===i?void 0:i.lat(),longitude:null===(a=r.getCenter())||void 0===a?void 0:a.lng(),tilt:r.getTilt(),zoom:r.getZoom()});case 4:case"end":return t.stop()}}),t)})))),r.addListener("center_changed",(function(){o.notifyListeners("onCameraMoveStarted",{mapId:e,isGesture:!0})})),r.addListener("bounds_changed",(0,i.Z)((0,n.Z)().mark((function t(){var i,a,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getMapBounds({id:e});case 2:s=t.sent,o.notifyListeners("onBoundsChanged",{mapId:e,bearing:r.getHeading(),bounds:s,latitude:null===(i=r.getCenter())||void 0===i?void 0:i.lat(),longitude:null===(a=r.getCenter())||void 0===a?void 0:a.lng(),tilt:r.getTilt(),zoom:r.getZoom()});case 4:case"end":return t.stop()}}),t)})))),r.addListener("click",(function(t){var r,n;o.notifyListeners("onMapClick",{mapId:e,latitude:null===(r=t.latLng)||void 0===r?void 0:r.lat(),longitude:null===(n=t.latLng)||void 0===n?void 0:n.lng()})})),this.notifyListeners("onMapReady",{mapId:e});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"buildMarkerOpts",value:function(t,e){var r=void 0;return t.iconUrl&&(r={url:t.iconUrl,scaledSize:t.iconSize?new google.maps.Size(t.iconSize.width,t.iconSize.height):null,anchor:t.iconAnchor?new google.maps.Point(t.iconAnchor.x,t.iconAnchor.y):new google.maps.Point(0,0),origin:t.iconOrigin?new google.maps.Point(t.iconOrigin.x,t.iconOrigin.y):new google.maps.Point(0,0)}),{position:t.coordinate,map:e,opacity:t.opacity,title:t.title,icon:r,draggable:t.draggable}}}]),l}(l.Uw)},8262:function(t){t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(i=n;0!==i--;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(o=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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STdJLEVBQUU4SSxVQUFZMVIsT0FBT29HLFVBQVVzTCxRQUFTLE9BQU85SSxFQUFFOEksWUFBYy9NLEVBQUUrTSxVQUNyRSxHQUFJOUksRUFBRStJLFdBQWEzUixPQUFPb0csVUFBVXVMLFNBQVUsT0FBTy9JLEVBQUUrSSxhQUFlaE4sRUFBRWdOLFdBSXhFLElBREFoVSxHQURBMFQsRUFBT3JSLE9BQU9xUixLQUFLekksSUFDTGpMLFVBQ0NxQyxPQUFPcVIsS0FBSzFNLEdBQUdoSCxPQUFRLE9BQU8sRUFFN0MsSUFBS3hCLEVBQUl3QixFQUFnQixJQUFSeEIsS0FDZixJQUFLNkQsT0FBT29HLFVBQVVDLGVBQWVDLEtBQUszQixFQUFHME0sRUFBS2xWLElBQUssT0FBTyxFQUVoRSxJQUFLQSxFQUFJd0IsRUFBZ0IsSUFBUnhCLEtBQVksQ0FDM0IsSUFBSXlWLEVBQU1QLEVBQUtsVixHQUVmLElBQUsrTCxFQUFNVSxFQUFFZ0osR0FBTWpOLEVBQUVpTixJQUFPLE9BQU8sQ0FDckMsQ0FFQSxPQUFPLENBQ1QsQ0FHQSxPQUFPaEosSUFBSUEsR0FBS2pFLElBQUlBLENBQ3RCIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMva2RidXNoL3NyYy9zb3J0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL2tkYnVzaC9zcmMvd2l0aGluLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2tkYnVzaC9zcmMvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvc3VwZXJjbHVzdGVyL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL2tkYnVzaC9zcmMvcmFuZ2UuanMiLCIuLi9ub2RlX21vZHVsZXMvQGdvb2dsZW1hcHMvbWFya2VyY2x1c3RlcmVyL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9ub2RlX21vZHVsZXMvQGdvb2dsZW1hcHMvbWFya2VyY2x1c3RlcmVyL3NyYy9jbHVzdGVyLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0Bnb29nbGVtYXBzL21hcmtlcmNsdXN0ZXJlci9zcmMvYWxnb3JpdGhtcy9jb3JlLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0Bnb29nbGVtYXBzL21hcmtlcmNsdXN0ZXJlci9zcmMvYWxnb3JpdGhtcy9zdXBlcmNsdXN0ZXIudHMiLCIuLi9ub2RlX21vZHVsZXMvQGdvb2dsZW1hcHMvbWFya2VyY2x1c3RlcmVyL3NyYy9yZW5kZXJlci50cyIsIi4uL25vZGVfbW9kdWxlcy9AZ29vZ2xlbWFwcy9tYXJrZXJjbHVzdGVyZXIvc3JjL292ZXJsYXktdmlldy1zYWZlLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0Bnb29nbGVtYXBzL21hcmtlcmNsdXN0ZXJlci9zcmMvbWFya2VyY2x1c3RlcmVyLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BjYXBhY2l0b3IvZ29vZ2xlLW1hcHMvc3JjL3dlYi50cyIsIi4uL25vZGVfbW9kdWxlcy9mYXN0LWRlZXAtZXF1YWwvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0S0QoaWRzLCBjb29yZHMsIG5vZGVTaXplLCBsZWZ0LCByaWdodCwgZGVwdGgpIHtcbiAgICBpZiAocmlnaHQgLSBsZWZ0IDw9IG5vZGVTaXplKSByZXR1cm47XG5cbiAgICBjb25zdCBtID0gKGxlZnQgKyByaWdodCkgPj4gMTtcblxuICAgIHNlbGVjdChpZHMsIGNvb3JkcywgbSwgbGVmdCwgcmlnaHQsIGRlcHRoICUgMik7XG5cbiAgICBzb3J0S0QoaWRzLCBjb29yZHMsIG5vZGVTaXplLCBsZWZ0LCBtIC0gMSwgZGVwdGggKyAxKTtcbiAgICBzb3J0S0QoaWRzLCBjb29yZHMsIG5vZGVTaXplLCBtICsgMSwgcmlnaHQsIGRlcHRoICsgMSk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdChpZHMsIGNvb3JkcywgaywgbGVmdCwgcmlnaHQsIGluYykge1xuXG4gICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkge1xuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7XG4gICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7XG4gICAgICAgICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgICAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpO1xuICAgICAgICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICAgICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgICAgICAgc2VsZWN0KGlkcywgY29vcmRzLCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgaW5jKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHQgPSBjb29yZHNbMiAqIGsgKyBpbmNdO1xuICAgICAgICBsZXQgaSA9IGxlZnQ7XG4gICAgICAgIGxldCBqID0gcmlnaHQ7XG5cbiAgICAgICAgc3dhcEl0ZW0oaWRzLCBjb29yZHMsIGxlZnQsIGspO1xuICAgICAgICBpZiAoY29vcmRzWzIgKiByaWdodCArIGluY10gPiB0KSBzd2FwSXRlbShpZHMsIGNvb3JkcywgbGVmdCwgcmlnaHQpO1xuXG4gICAgICAgIHdoaWxlIChpIDwgaikge1xuICAgICAgICAgICAgc3dhcEl0ZW0oaWRzLCBjb29yZHMsIGksIGopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgd2hpbGUgKGNvb3Jkc1syICogaSArIGluY10gPCB0KSBpKys7XG4gICAgICAgICAgICB3aGlsZSAoY29vcmRzWzIgKiBqICsgaW5jXSA+IHQpIGotLTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb29yZHNbMiAqIGxlZnQgKyBpbmNdID09PSB0KSBzd2FwSXRlbShpZHMsIGNvb3JkcywgbGVmdCwgaik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgc3dhcEl0ZW0oaWRzLCBjb29yZHMsIGosIHJpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqIDw9IGspIGxlZnQgPSBqICsgMTtcbiAgICAgICAgaWYgKGsgPD0gaikgcmlnaHQgPSBqIC0gMTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN3YXBJdGVtKGlkcywgY29vcmRzLCBpLCBqKSB7XG4gICAgc3dhcChpZHMsIGksIGopO1xuICAgIHN3YXAoY29vcmRzLCAyICogaSwgMiAqIGopO1xuICAgIHN3YXAoY29vcmRzLCAyICogaSArIDEsIDIgKiBqICsgMSk7XG59XG5cbmZ1bmN0aW9uIHN3YXAoYXJyLCBpLCBqKSB7XG4gICAgY29uc3QgdG1wID0gYXJyW2ldO1xuICAgIGFycltpXSA9IGFycltqXTtcbiAgICBhcnJbal0gPSB0bXA7XG59XG4iLCJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdpdGhpbihpZHMsIGNvb3JkcywgcXgsIHF5LCByLCBub2RlU2l6ZSkge1xuICAgIGNvbnN0IHN0YWNrID0gWzAsIGlkcy5sZW5ndGggLSAxLCAwXTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCByMiA9IHIgKiByO1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBheGlzID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0IDw9IG5vZGVTaXplKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVmdDsgaSA8PSByaWdodDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNxRGlzdChjb29yZHNbMiAqIGldLCBjb29yZHNbMiAqIGkgKyAxXSwgcXgsIHF5KSA8PSByMikgcmVzdWx0LnB1c2goaWRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbSA9IE1hdGguZmxvb3IoKGxlZnQgKyByaWdodCkgLyAyKTtcblxuICAgICAgICBjb25zdCB4ID0gY29vcmRzWzIgKiBtXTtcbiAgICAgICAgY29uc3QgeSA9IGNvb3Jkc1syICogbSArIDFdO1xuXG4gICAgICAgIGlmIChzcURpc3QoeCwgeSwgcXgsIHF5KSA8PSByMikgcmVzdWx0LnB1c2goaWRzW21dKTtcblxuICAgICAgICBjb25zdCBuZXh0QXhpcyA9IChheGlzICsgMSkgJSAyO1xuXG4gICAgICAgIGlmIChheGlzID09PSAwID8gcXggLSByIDw9IHggOiBxeSAtIHIgPD0geSkge1xuICAgICAgICAgICAgc3RhY2sucHVzaChsZWZ0KTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobSAtIDEpO1xuICAgICAgICAgICAgc3RhY2sucHVzaChuZXh0QXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF4aXMgPT09IDAgPyBxeCArIHIgPj0geCA6IHF5ICsgciA+PSB5KSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKG0gKyAxKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gocmlnaHQpO1xuICAgICAgICAgICAgc3RhY2sucHVzaChuZXh0QXhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBzcURpc3QoYXgsIGF5LCBieCwgYnkpIHtcbiAgICBjb25zdCBkeCA9IGF4IC0gYng7XG4gICAgY29uc3QgZHkgPSBheSAtIGJ5O1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbiIsIlxuaW1wb3J0IHNvcnQgZnJvbSAnLi9zb3J0JztcbmltcG9ydCByYW5nZSBmcm9tICcuL3JhbmdlJztcbmltcG9ydCB3aXRoaW4gZnJvbSAnLi93aXRoaW4nO1xuXG5jb25zdCBkZWZhdWx0R2V0WCA9IHAgPT4gcFswXTtcbmNvbnN0IGRlZmF1bHRHZXRZID0gcCA9PiBwWzFdO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLREJ1c2gge1xuICAgIGNvbnN0cnVjdG9yKHBvaW50cywgZ2V0WCA9IGRlZmF1bHRHZXRYLCBnZXRZID0gZGVmYXVsdEdldFksIG5vZGVTaXplID0gNjQsIEFycmF5VHlwZSA9IEZsb2F0NjRBcnJheSkge1xuICAgICAgICB0aGlzLm5vZGVTaXplID0gbm9kZVNpemU7XG4gICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuXG4gICAgICAgIGNvbnN0IEluZGV4QXJyYXlUeXBlID0gcG9pbnRzLmxlbmd0aCA8IDY1NTM2ID8gVWludDE2QXJyYXkgOiBVaW50MzJBcnJheTtcblxuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmlkcyA9IG5ldyBJbmRleEFycmF5VHlwZShwb2ludHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY29vcmRzID0gdGhpcy5jb29yZHMgPSBuZXcgQXJyYXlUeXBlKHBvaW50cy5sZW5ndGggKiAyKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWRzW2ldID0gaTtcbiAgICAgICAgICAgIGNvb3Jkc1syICogaV0gPSBnZXRYKHBvaW50c1tpXSk7XG4gICAgICAgICAgICBjb29yZHNbMiAqIGkgKyAxXSA9IGdldFkocG9pbnRzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvcnQoaWRzLCBjb29yZHMsIG5vZGVTaXplLCAwLCBpZHMubGVuZ3RoIC0gMSwgMCk7XG4gICAgfVxuXG4gICAgcmFuZ2UobWluWCwgbWluWSwgbWF4WCwgbWF4WSkge1xuICAgICAgICByZXR1cm4gcmFuZ2UodGhpcy5pZHMsIHRoaXMuY29vcmRzLCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCB0aGlzLm5vZGVTaXplKTtcbiAgICB9XG5cbiAgICB3aXRoaW4oeCwgeSwgcikge1xuICAgICAgICByZXR1cm4gd2l0aGluKHRoaXMuaWRzLCB0aGlzLmNvb3JkcywgeCwgeSwgciwgdGhpcy5ub2RlU2l6ZSk7XG4gICAgfVxufVxuIiwiXG5pbXBvcnQgS0RCdXNoIGZyb20gJ2tkYnVzaCc7XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIG1pblpvb206IDAsICAgLy8gbWluIHpvb20gdG8gZ2VuZXJhdGUgY2x1c3RlcnMgb25cbiAgICBtYXhab29tOiAxNiwgIC8vIG1heCB6b29tIGxldmVsIHRvIGNsdXN0ZXIgdGhlIHBvaW50cyBvblxuICAgIG1pblBvaW50czogMiwgLy8gbWluaW11bSBwb2ludHMgdG8gZm9ybSBhIGNsdXN0ZXJcbiAgICByYWRpdXM6IDQwLCAgIC8vIGNsdXN0ZXIgcmFkaXVzIGluIHBpeGVsc1xuICAgIGV4dGVudDogNTEyLCAgLy8gdGlsZSBleHRlbnQgKHJhZGl1cyBpcyBjYWxjdWxhdGVkIHJlbGF0aXZlIHRvIGl0KVxuICAgIG5vZGVTaXplOiA2NCwgLy8gc2l6ZSBvZiB0aGUgS0QtdHJlZSBsZWFmIG5vZGUsIGFmZmVjdHMgcGVyZm9ybWFuY2VcbiAgICBsb2c6IGZhbHNlLCAgIC8vIHdoZXRoZXIgdG8gbG9nIHRpbWluZyBpbmZvXG5cbiAgICAvLyB3aGV0aGVyIHRvIGdlbmVyYXRlIG51bWVyaWMgaWRzIGZvciBpbnB1dCBmZWF0dXJlcyAoaW4gdmVjdG9yIHRpbGVzKVxuICAgIGdlbmVyYXRlSWQ6IGZhbHNlLFxuXG4gICAgLy8gYSByZWR1Y2UgZnVuY3Rpb24gZm9yIGNhbGN1bGF0aW5nIGN1c3RvbSBjbHVzdGVyIHByb3BlcnRpZXNcbiAgICByZWR1Y2U6IG51bGwsIC8vIChhY2N1bXVsYXRlZCwgcHJvcHMpID0+IHsgYWNjdW11bGF0ZWQuc3VtICs9IHByb3BzLnN1bTsgfVxuXG4gICAgLy8gcHJvcGVydGllcyB0byB1c2UgZm9yIGluZGl2aWR1YWwgcG9pbnRzIHdoZW4gcnVubmluZyB0aGUgcmVkdWNlclxuICAgIG1hcDogcHJvcHMgPT4gcHJvcHMgLy8gcHJvcHMgPT4gKHtzdW06IHByb3BzLm15X3ZhbHVlfSlcbn07XG5cbmNvbnN0IGZyb3VuZCA9IE1hdGguZnJvdW5kIHx8ICh0bXAgPT4gKCh4KSA9PiB7IHRtcFswXSA9ICt4OyByZXR1cm4gdG1wWzBdOyB9KSkobmV3IEZsb2F0MzJBcnJheSgxKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1cGVyY2x1c3RlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoT2JqZWN0LmNyZWF0ZShkZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnRyZWVzID0gbmV3IEFycmF5KHRoaXMub3B0aW9ucy5tYXhab29tICsgMSk7XG4gICAgfVxuXG4gICAgbG9hZChwb2ludHMpIHtcbiAgICAgICAgY29uc3Qge2xvZywgbWluWm9vbSwgbWF4Wm9vbSwgbm9kZVNpemV9ID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIGlmIChsb2cpIGNvbnNvbGUudGltZSgndG90YWwgdGltZScpO1xuXG4gICAgICAgIGNvbnN0IHRpbWVySWQgPSBgcHJlcGFyZSAkeyAgcG9pbnRzLmxlbmd0aCAgfSBwb2ludHNgO1xuICAgICAgICBpZiAobG9nKSBjb25zb2xlLnRpbWUodGltZXJJZCk7XG5cbiAgICAgICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgYSBjbHVzdGVyIG9iamVjdCBmb3IgZWFjaCBwb2ludCBhbmQgaW5kZXggaW5wdXQgcG9pbnRzIGludG8gYSBLRC10cmVlXG4gICAgICAgIGxldCBjbHVzdGVycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFwb2ludHNbaV0uZ2VvbWV0cnkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY2x1c3RlcnMucHVzaChjcmVhdGVQb2ludENsdXN0ZXIocG9pbnRzW2ldLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmVlc1ttYXhab29tICsgMV0gPSBuZXcgS0RCdXNoKGNsdXN0ZXJzLCBnZXRYLCBnZXRZLCBub2RlU2l6ZSwgRmxvYXQzMkFycmF5KTtcblxuICAgICAgICBpZiAobG9nKSBjb25zb2xlLnRpbWVFbmQodGltZXJJZCk7XG5cbiAgICAgICAgLy8gY2x1c3RlciBwb2ludHMgb24gbWF4IHpvb20sIHRoZW4gY2x1c3RlciB0aGUgcmVzdWx0cyBvbiBwcmV2aW91cyB6b29tLCBldGMuO1xuICAgICAgICAvLyByZXN1bHRzIGluIGEgY2x1c3RlciBoaWVyYXJjaHkgYWNyb3NzIHpvb20gbGV2ZWxzXG4gICAgICAgIGZvciAobGV0IHogPSBtYXhab29tOyB6ID49IG1pblpvb207IHotLSkge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gK0RhdGUubm93KCk7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBzZXQgb2YgY2x1c3RlcnMgZm9yIHRoZSB6b29tIGFuZCBpbmRleCB0aGVtIHdpdGggYSBLRC10cmVlXG4gICAgICAgICAgICBjbHVzdGVycyA9IHRoaXMuX2NsdXN0ZXIoY2x1c3RlcnMsIHopO1xuICAgICAgICAgICAgdGhpcy50cmVlc1t6XSA9IG5ldyBLREJ1c2goY2x1c3RlcnMsIGdldFgsIGdldFksIG5vZGVTaXplLCBGbG9hdDMyQXJyYXkpO1xuXG4gICAgICAgICAgICBpZiAobG9nKSBjb25zb2xlLmxvZygneiVkOiAlZCBjbHVzdGVycyBpbiAlZG1zJywgeiwgY2x1c3RlcnMubGVuZ3RoLCArRGF0ZS5ub3coKSAtIG5vdyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobG9nKSBjb25zb2xlLnRpbWVFbmQoJ3RvdGFsIHRpbWUnKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRDbHVzdGVycyhiYm94LCB6b29tKSB7XG4gICAgICAgIGxldCBtaW5MbmcgPSAoKGJib3hbMF0gKyAxODApICUgMzYwICsgMzYwKSAlIDM2MCAtIDE4MDtcbiAgICAgICAgY29uc3QgbWluTGF0ID0gTWF0aC5tYXgoLTkwLCBNYXRoLm1pbig5MCwgYmJveFsxXSkpO1xuICAgICAgICBsZXQgbWF4TG5nID0gYmJveFsyXSA9PT0gMTgwID8gMTgwIDogKChiYm94WzJdICsgMTgwKSAlIDM2MCArIDM2MCkgJSAzNjAgLSAxODA7XG4gICAgICAgIGNvbnN0IG1heExhdCA9IE1hdGgubWF4KC05MCwgTWF0aC5taW4oOTAsIGJib3hbM10pKTtcblxuICAgICAgICBpZiAoYmJveFsyXSAtIGJib3hbMF0gPj0gMzYwKSB7XG4gICAgICAgICAgICBtaW5MbmcgPSAtMTgwO1xuICAgICAgICAgICAgbWF4TG5nID0gMTgwO1xuICAgICAgICB9IGVsc2UgaWYgKG1pbkxuZyA+IG1heExuZykge1xuICAgICAgICAgICAgY29uc3QgZWFzdGVybkhlbSA9IHRoaXMuZ2V0Q2x1c3RlcnMoW21pbkxuZywgbWluTGF0LCAxODAsIG1heExhdF0sIHpvb20pO1xuICAgICAgICAgICAgY29uc3Qgd2VzdGVybkhlbSA9IHRoaXMuZ2V0Q2x1c3RlcnMoWy0xODAsIG1pbkxhdCwgbWF4TG5nLCBtYXhMYXRdLCB6b29tKTtcbiAgICAgICAgICAgIHJldHVybiBlYXN0ZXJuSGVtLmNvbmNhdCh3ZXN0ZXJuSGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyZWUgPSB0aGlzLnRyZWVzW3RoaXMuX2xpbWl0Wm9vbSh6b29tKV07XG4gICAgICAgIGNvbnN0IGlkcyA9IHRyZWUucmFuZ2UobG5nWChtaW5MbmcpLCBsYXRZKG1heExhdCksIGxuZ1gobWF4TG5nKSwgbGF0WShtaW5MYXQpKTtcbiAgICAgICAgY29uc3QgY2x1c3RlcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0cmVlLnBvaW50c1tpZF07XG4gICAgICAgICAgICBjbHVzdGVycy5wdXNoKGMubnVtUG9pbnRzID8gZ2V0Q2x1c3RlckpTT04oYykgOiB0aGlzLnBvaW50c1tjLmluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsdXN0ZXJzO1xuICAgIH1cblxuICAgIGdldENoaWxkcmVuKGNsdXN0ZXJJZCkge1xuICAgICAgICBjb25zdCBvcmlnaW5JZCA9IHRoaXMuX2dldE9yaWdpbklkKGNsdXN0ZXJJZCk7XG4gICAgICAgIGNvbnN0IG9yaWdpblpvb20gPSB0aGlzLl9nZXRPcmlnaW5ab29tKGNsdXN0ZXJJZCk7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gJ05vIGNsdXN0ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGlkLic7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnRyZWVzW29yaWdpblpvb21dO1xuICAgICAgICBpZiAoIWluZGV4KSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IGluZGV4LnBvaW50c1tvcmlnaW5JZF07XG4gICAgICAgIGlmICghb3JpZ2luKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm9wdGlvbnMucmFkaXVzIC8gKHRoaXMub3B0aW9ucy5leHRlbnQgKiBNYXRoLnBvdygyLCBvcmlnaW5ab29tIC0gMSkpO1xuICAgICAgICBjb25zdCBpZHMgPSBpbmRleC53aXRoaW4ob3JpZ2luLngsIG9yaWdpbi55LCByKTtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBpbmRleC5wb2ludHNbaWRdO1xuICAgICAgICAgICAgaWYgKGMucGFyZW50SWQgPT09IGNsdXN0ZXJJZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goYy5udW1Qb2ludHMgPyBnZXRDbHVzdGVySlNPTihjKSA6IHRoaXMucG9pbnRzW2MuaW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgIH1cblxuICAgIGdldExlYXZlcyhjbHVzdGVySWQsIGxpbWl0LCBvZmZzZXQpIHtcbiAgICAgICAgbGltaXQgPSBsaW1pdCB8fCAxMDtcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICAgICAgY29uc3QgbGVhdmVzID0gW107XG4gICAgICAgIHRoaXMuX2FwcGVuZExlYXZlcyhsZWF2ZXMsIGNsdXN0ZXJJZCwgbGltaXQsIG9mZnNldCwgMCk7XG5cbiAgICAgICAgcmV0dXJuIGxlYXZlcztcbiAgICB9XG5cbiAgICBnZXRUaWxlKHosIHgsIHkpIHtcbiAgICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZXNbdGhpcy5fbGltaXRab29tKHopXTtcbiAgICAgICAgY29uc3QgejIgPSBNYXRoLnBvdygyLCB6KTtcbiAgICAgICAgY29uc3Qge2V4dGVudCwgcmFkaXVzfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgcCA9IHJhZGl1cyAvIGV4dGVudDtcbiAgICAgICAgY29uc3QgdG9wID0gKHkgLSBwKSAvIHoyO1xuICAgICAgICBjb25zdCBib3R0b20gPSAoeSArIDEgKyBwKSAvIHoyO1xuXG4gICAgICAgIGNvbnN0IHRpbGUgPSB7XG4gICAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hZGRUaWxlRmVhdHVyZXMoXG4gICAgICAgICAgICB0cmVlLnJhbmdlKCh4IC0gcCkgLyB6MiwgdG9wLCAoeCArIDEgKyBwKSAvIHoyLCBib3R0b20pLFxuICAgICAgICAgICAgdHJlZS5wb2ludHMsIHgsIHksIHoyLCB0aWxlKTtcblxuICAgICAgICBpZiAoeCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fYWRkVGlsZUZlYXR1cmVzKFxuICAgICAgICAgICAgICAgIHRyZWUucmFuZ2UoMSAtIHAgLyB6MiwgdG9wLCAxLCBib3R0b20pLFxuICAgICAgICAgICAgICAgIHRyZWUucG9pbnRzLCB6MiwgeSwgejIsIHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4ID09PSB6MiAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZFRpbGVGZWF0dXJlcyhcbiAgICAgICAgICAgICAgICB0cmVlLnJhbmdlKDAsIHRvcCwgcCAvIHoyLCBib3R0b20pLFxuICAgICAgICAgICAgICAgIHRyZWUucG9pbnRzLCAtMSwgeSwgejIsIHRpbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpbGUuZmVhdHVyZXMubGVuZ3RoID8gdGlsZSA6IG51bGw7XG4gICAgfVxuXG4gICAgZ2V0Q2x1c3RlckV4cGFuc2lvblpvb20oY2x1c3RlcklkKSB7XG4gICAgICAgIGxldCBleHBhbnNpb25ab29tID0gdGhpcy5fZ2V0T3JpZ2luWm9vbShjbHVzdGVySWQpIC0gMTtcbiAgICAgICAgd2hpbGUgKGV4cGFuc2lvblpvb20gPD0gdGhpcy5vcHRpb25zLm1heFpvb20pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbihjbHVzdGVySWQpO1xuICAgICAgICAgICAgZXhwYW5zaW9uWm9vbSsrO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMSkgYnJlYWs7XG4gICAgICAgICAgICBjbHVzdGVySWQgPSBjaGlsZHJlblswXS5wcm9wZXJ0aWVzLmNsdXN0ZXJfaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cGFuc2lvblpvb207XG4gICAgfVxuXG4gICAgX2FwcGVuZExlYXZlcyhyZXN1bHQsIGNsdXN0ZXJJZCwgbGltaXQsIG9mZnNldCwgc2tpcHBlZCkge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oY2x1c3RlcklkKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IGNoaWxkLnByb3BlcnRpZXM7XG5cbiAgICAgICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5jbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBwZWQgKyBwcm9wcy5wb2ludF9jb3VudCA8PSBvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCB0aGUgd2hvbGUgY2x1c3RlclxuICAgICAgICAgICAgICAgICAgICBza2lwcGVkICs9IHByb3BzLnBvaW50X2NvdW50O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVudGVyIHRoZSBjbHVzdGVyXG4gICAgICAgICAgICAgICAgICAgIHNraXBwZWQgPSB0aGlzLl9hcHBlbmRMZWF2ZXMocmVzdWx0LCBwcm9wcy5jbHVzdGVyX2lkLCBsaW1pdCwgb2Zmc2V0LCBza2lwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpdCB0aGUgY2x1c3RlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcHBlZCA8IG9mZnNldCkge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgYSBzaW5nbGUgcG9pbnRcbiAgICAgICAgICAgICAgICBza2lwcGVkKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBhIHNpbmdsZSBwb2ludFxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSBsaW1pdCkgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2tpcHBlZDtcbiAgICB9XG5cbiAgICBfYWRkVGlsZUZlYXR1cmVzKGlkcywgcG9pbnRzLCB4LCB5LCB6MiwgdGlsZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgaWRzKSB7XG4gICAgICAgICAgICBjb25zdCBjID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgY29uc3QgaXNDbHVzdGVyID0gYy5udW1Qb2ludHM7XG5cbiAgICAgICAgICAgIGxldCB0YWdzLCBweCwgcHk7XG4gICAgICAgICAgICBpZiAoaXNDbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgdGFncyA9IGdldENsdXN0ZXJQcm9wZXJ0aWVzKGMpO1xuICAgICAgICAgICAgICAgIHB4ID0gYy54O1xuICAgICAgICAgICAgICAgIHB5ID0gYy55O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gdGhpcy5wb2ludHNbYy5pbmRleF07XG4gICAgICAgICAgICAgICAgdGFncyA9IHAucHJvcGVydGllcztcbiAgICAgICAgICAgICAgICBweCA9IGxuZ1gocC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSk7XG4gICAgICAgICAgICAgICAgcHkgPSBsYXRZKHAuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IDEsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IFtbXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLmV4dGVudCAqIChweCAqIHoyIC0geCkpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5leHRlbnQgKiAocHkgKiB6MiAtIHkpKVxuICAgICAgICAgICAgICAgIF1dLFxuICAgICAgICAgICAgICAgIHRhZ3NcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGFzc2lnbiBpZFxuICAgICAgICAgICAgbGV0IGlkO1xuICAgICAgICAgICAgaWYgKGlzQ2x1c3Rlcikge1xuICAgICAgICAgICAgICAgIGlkID0gYy5pZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdlbmVyYXRlSWQpIHtcbiAgICAgICAgICAgICAgICAvLyBvcHRpb25hbGx5IGdlbmVyYXRlIGlkXG4gICAgICAgICAgICAgICAgaWQgPSBjLmluZGV4O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvaW50c1tjLmluZGV4XS5pZCkge1xuICAgICAgICAgICAgICAgIC8vIGtlZXAgaWQgaWYgYWxyZWFkeSBhc3NpZ25lZFxuICAgICAgICAgICAgICAgIGlkID0gdGhpcy5wb2ludHNbYy5pbmRleF0uaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSBmLmlkID0gaWQ7XG5cbiAgICAgICAgICAgIHRpbGUuZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9saW1pdFpvb20oeikge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgodGhpcy5vcHRpb25zLm1pblpvb20sIE1hdGgubWluKE1hdGguZmxvb3IoK3opLCB0aGlzLm9wdGlvbnMubWF4Wm9vbSArIDEpKTtcbiAgICB9XG5cbiAgICBfY2x1c3Rlcihwb2ludHMsIHpvb20pIHtcbiAgICAgICAgY29uc3QgY2x1c3RlcnMgPSBbXTtcbiAgICAgICAgY29uc3Qge3JhZGl1cywgZXh0ZW50LCByZWR1Y2UsIG1pblBvaW50c30gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHIgPSByYWRpdXMgLyAoZXh0ZW50ICogTWF0aC5wb3coMiwgem9vbSkpO1xuXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIHBvaW50XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgLy8gaWYgd2UndmUgYWxyZWFkeSB2aXNpdGVkIHRoZSBwb2ludCBhdCB0aGlzIHpvb20gbGV2ZWwsIHNraXAgaXRcbiAgICAgICAgICAgIGlmIChwLnpvb20gPD0gem9vbSkgY29udGludWU7XG4gICAgICAgICAgICBwLnpvb20gPSB6b29tO1xuXG4gICAgICAgICAgICAvLyBmaW5kIGFsbCBuZWFyYnkgcG9pbnRzXG4gICAgICAgICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlc1t6b29tICsgMV07XG4gICAgICAgICAgICBjb25zdCBuZWlnaGJvcklkcyA9IHRyZWUud2l0aGluKHAueCwgcC55LCByKTtcblxuICAgICAgICAgICAgY29uc3QgbnVtUG9pbnRzT3JpZ2luID0gcC5udW1Qb2ludHMgfHwgMTtcbiAgICAgICAgICAgIGxldCBudW1Qb2ludHMgPSBudW1Qb2ludHNPcmlnaW47XG5cbiAgICAgICAgICAgIC8vIGNvdW50IHRoZSBudW1iZXIgb2YgcG9pbnRzIGluIGEgcG90ZW50aWFsIGNsdXN0ZXJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmVpZ2hib3JJZCBvZiBuZWlnaGJvcklkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0cmVlLnBvaW50c1tuZWlnaGJvcklkXTtcbiAgICAgICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IG5laWdoYm9ycyB0aGF0IGFyZSBhbHJlYWR5IHByb2Nlc3NlZFxuICAgICAgICAgICAgICAgIGlmIChiLnpvb20gPiB6b29tKSBudW1Qb2ludHMgKz0gYi5udW1Qb2ludHMgfHwgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2VyZSBuZWlnaGJvcnMgdG8gbWVyZ2UsIGFuZCB0aGVyZSBhcmUgZW5vdWdoIHBvaW50cyB0byBmb3JtIGEgY2x1c3RlclxuICAgICAgICAgICAgaWYgKG51bVBvaW50cyA+IG51bVBvaW50c09yaWdpbiAmJiBudW1Qb2ludHMgPj0gbWluUG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHd4ID0gcC54ICogbnVtUG9pbnRzT3JpZ2luO1xuICAgICAgICAgICAgICAgIGxldCB3eSA9IHAueSAqIG51bVBvaW50c09yaWdpbjtcblxuICAgICAgICAgICAgICAgIGxldCBjbHVzdGVyUHJvcGVydGllcyA9IHJlZHVjZSAmJiBudW1Qb2ludHNPcmlnaW4gPiAxID8gdGhpcy5fbWFwKHAsIHRydWUpIDogbnVsbDtcblxuICAgICAgICAgICAgICAgIC8vIGVuY29kZSBib3RoIHpvb20gYW5kIHBvaW50IGluZGV4IG9uIHdoaWNoIHRoZSBjbHVzdGVyIG9yaWdpbmF0ZWQgLS0gb2Zmc2V0IGJ5IHRvdGFsIGxlbmd0aCBvZiBmZWF0dXJlc1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gKGkgPDwgNSkgKyAoem9vbSArIDEpICsgdGhpcy5wb2ludHMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuZWlnaGJvcklkIG9mIG5laWdoYm9ySWRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0cmVlLnBvaW50c1tuZWlnaGJvcklkXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYi56b29tIDw9IHpvb20pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBiLnpvb20gPSB6b29tOyAvLyBzYXZlIHRoZSB6b29tIChzbyBpdCBkb2Vzbid0IGdldCBwcm9jZXNzZWQgdHdpY2UpXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtUG9pbnRzMiA9IGIubnVtUG9pbnRzIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgIHd4ICs9IGIueCAqIG51bVBvaW50czI7IC8vIGFjY3VtdWxhdGUgY29vcmRpbmF0ZXMgZm9yIGNhbGN1bGF0aW5nIHdlaWdodGVkIGNlbnRlclxuICAgICAgICAgICAgICAgICAgICB3eSArPSBiLnkgKiBudW1Qb2ludHMyO1xuXG4gICAgICAgICAgICAgICAgICAgIGIucGFyZW50SWQgPSBpZDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVkdWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNsdXN0ZXJQcm9wZXJ0aWVzKSBjbHVzdGVyUHJvcGVydGllcyA9IHRoaXMuX21hcChwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZHVjZShjbHVzdGVyUHJvcGVydGllcywgdGhpcy5fbWFwKGIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHAucGFyZW50SWQgPSBpZDtcbiAgICAgICAgICAgICAgICBjbHVzdGVycy5wdXNoKGNyZWF0ZUNsdXN0ZXIod3ggLyBudW1Qb2ludHMsIHd5IC8gbnVtUG9pbnRzLCBpZCwgbnVtUG9pbnRzLCBjbHVzdGVyUHJvcGVydGllcykpO1xuXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBsZWZ0IHBvaW50cyBhcyB1bmNsdXN0ZXJlZFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJzLnB1c2gocCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobnVtUG9pbnRzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5laWdoYm9ySWQgb2YgbmVpZ2hib3JJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0cmVlLnBvaW50c1tuZWlnaGJvcklkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLnpvb20gPD0gem9vbSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLnpvb20gPSB6b29tO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcnMucHVzaChiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbHVzdGVycztcbiAgICB9XG5cbiAgICAvLyBnZXQgaW5kZXggb2YgdGhlIHBvaW50IGZyb20gd2hpY2ggdGhlIGNsdXN0ZXIgb3JpZ2luYXRlZFxuICAgIF9nZXRPcmlnaW5JZChjbHVzdGVySWQpIHtcbiAgICAgICAgcmV0dXJuIChjbHVzdGVySWQgLSB0aGlzLnBvaW50cy5sZW5ndGgpID4+IDU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHpvb20gb2YgdGhlIHBvaW50IGZyb20gd2hpY2ggdGhlIGNsdXN0ZXIgb3JpZ2luYXRlZFxuICAgIF9nZXRPcmlnaW5ab29tKGNsdXN0ZXJJZCkge1xuICAgICAgICByZXR1cm4gKGNsdXN0ZXJJZCAtIHRoaXMucG9pbnRzLmxlbmd0aCkgJSAzMjtcbiAgICB9XG5cbiAgICBfbWFwKHBvaW50LCBjbG9uZSkge1xuICAgICAgICBpZiAocG9pbnQubnVtUG9pbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xvbmUgPyBleHRlbmQoe30sIHBvaW50LnByb3BlcnRpZXMpIDogcG9pbnQucHJvcGVydGllcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHRoaXMucG9pbnRzW3BvaW50LmluZGV4XS5wcm9wZXJ0aWVzO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm9wdGlvbnMubWFwKG9yaWdpbmFsKTtcbiAgICAgICAgcmV0dXJuIGNsb25lICYmIHJlc3VsdCA9PT0gb3JpZ2luYWwgPyBleHRlbmQoe30sIHJlc3VsdCkgOiByZXN1bHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDbHVzdGVyKHgsIHksIGlkLCBudW1Qb2ludHMsIHByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBmcm91bmQoeCksIC8vIHdlaWdodGVkIGNsdXN0ZXIgY2VudGVyOyByb3VuZCBmb3IgY29uc2lzdGVuY3kgd2l0aCBGbG9hdDMyQXJyYXkgaW5kZXhcbiAgICAgICAgeTogZnJvdW5kKHkpLFxuICAgICAgICB6b29tOiBJbmZpbml0eSwgLy8gdGhlIGxhc3Qgem9vbSB0aGUgY2x1c3RlciB3YXMgcHJvY2Vzc2VkIGF0XG4gICAgICAgIGlkLCAvLyBlbmNvZGVzIGluZGV4IG9mIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgY2x1c3RlciBhbmQgaXRzIHpvb20gbGV2ZWxcbiAgICAgICAgcGFyZW50SWQ6IC0xLCAvLyBwYXJlbnQgY2x1c3RlciBpZFxuICAgICAgICBudW1Qb2ludHMsXG4gICAgICAgIHByb3BlcnRpZXNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQb2ludENsdXN0ZXIocCwgaWQpIHtcbiAgICBjb25zdCBbeCwgeV0gPSBwLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IGZyb3VuZChsbmdYKHgpKSwgLy8gcHJvamVjdGVkIHBvaW50IGNvb3JkaW5hdGVzXG4gICAgICAgIHk6IGZyb3VuZChsYXRZKHkpKSxcbiAgICAgICAgem9vbTogSW5maW5pdHksIC8vIHRoZSBsYXN0IHpvb20gdGhlIHBvaW50IHdhcyBwcm9jZXNzZWQgYXRcbiAgICAgICAgaW5kZXg6IGlkLCAvLyBpbmRleCBvZiB0aGUgc291cmNlIGZlYXR1cmUgaW4gdGhlIG9yaWdpbmFsIGlucHV0IGFycmF5LFxuICAgICAgICBwYXJlbnRJZDogLTEgLy8gcGFyZW50IGNsdXN0ZXIgaWRcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBnZXRDbHVzdGVySlNPTihjbHVzdGVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICBpZDogY2x1c3Rlci5pZCxcbiAgICAgICAgcHJvcGVydGllczogZ2V0Q2x1c3RlclByb3BlcnRpZXMoY2x1c3RlciksXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFt4TG5nKGNsdXN0ZXIueCksIHlMYXQoY2x1c3Rlci55KV1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGdldENsdXN0ZXJQcm9wZXJ0aWVzKGNsdXN0ZXIpIHtcbiAgICBjb25zdCBjb3VudCA9IGNsdXN0ZXIubnVtUG9pbnRzO1xuICAgIGNvbnN0IGFiYnJldiA9XG4gICAgICAgIGNvdW50ID49IDEwMDAwID8gYCR7TWF0aC5yb3VuZChjb3VudCAvIDEwMDApICB9a2AgOlxuICAgICAgICBjb3VudCA+PSAxMDAwID8gYCR7TWF0aC5yb3VuZChjb3VudCAvIDEwMCkgLyAxMCAgfWtgIDogY291bnQ7XG4gICAgcmV0dXJuIGV4dGVuZChleHRlbmQoe30sIGNsdXN0ZXIucHJvcGVydGllcyksIHtcbiAgICAgICAgY2x1c3RlcjogdHJ1ZSxcbiAgICAgICAgY2x1c3Rlcl9pZDogY2x1c3Rlci5pZCxcbiAgICAgICAgcG9pbnRfY291bnQ6IGNvdW50LFxuICAgICAgICBwb2ludF9jb3VudF9hYmJyZXZpYXRlZDogYWJicmV2XG4gICAgfSk7XG59XG5cbi8vIGxvbmdpdHVkZS9sYXRpdHVkZSB0byBzcGhlcmljYWwgbWVyY2F0b3IgaW4gWzAuLjFdIHJhbmdlXG5mdW5jdGlvbiBsbmdYKGxuZykge1xuICAgIHJldHVybiBsbmcgLyAzNjAgKyAwLjU7XG59XG5mdW5jdGlvbiBsYXRZKGxhdCkge1xuICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKGxhdCAqIE1hdGguUEkgLyAxODApO1xuICAgIGNvbnN0IHkgPSAoMC41IC0gMC4yNSAqIE1hdGgubG9nKCgxICsgc2luKSAvICgxIC0gc2luKSkgLyBNYXRoLlBJKTtcbiAgICByZXR1cm4geSA8IDAgPyAwIDogeSA+IDEgPyAxIDogeTtcbn1cblxuLy8gc3BoZXJpY2FsIG1lcmNhdG9yIHRvIGxvbmdpdHVkZS9sYXRpdHVkZVxuZnVuY3Rpb24geExuZyh4KSB7XG4gICAgcmV0dXJuICh4IC0gMC41KSAqIDM2MDtcbn1cbmZ1bmN0aW9uIHlMYXQoeSkge1xuICAgIGNvbnN0IHkyID0gKDE4MCAtIHkgKiAzNjApICogTWF0aC5QSSAvIDE4MDtcbiAgICByZXR1cm4gMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKHkyKSkgLyBNYXRoLlBJIC0gOTA7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMpIHtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHNyYykgZGVzdFtpZF0gPSBzcmNbaWRdO1xuICAgIHJldHVybiBkZXN0O1xufVxuXG5mdW5jdGlvbiBnZXRYKHApIHtcbiAgICByZXR1cm4gcC54O1xufVxuZnVuY3Rpb24gZ2V0WShwKSB7XG4gICAgcmV0dXJuIHAueTtcbn1cbiIsIlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZ2UoaWRzLCBjb29yZHMsIG1pblgsIG1pblksIG1heFgsIG1heFksIG5vZGVTaXplKSB7XG4gICAgY29uc3Qgc3RhY2sgPSBbMCwgaWRzLmxlbmd0aCAtIDEsIDBdO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGxldCB4LCB5O1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBheGlzID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0IDw9IG5vZGVTaXplKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVmdDsgaSA8PSByaWdodDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgeCA9IGNvb3Jkc1syICogaV07XG4gICAgICAgICAgICAgICAgeSA9IGNvb3Jkc1syICogaSArIDFdO1xuICAgICAgICAgICAgICAgIGlmICh4ID49IG1pblggJiYgeCA8PSBtYXhYICYmIHkgPj0gbWluWSAmJiB5IDw9IG1heFkpIHJlc3VsdC5wdXNoKGlkc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKChsZWZ0ICsgcmlnaHQpIC8gMik7XG5cbiAgICAgICAgeCA9IGNvb3Jkc1syICogbV07XG4gICAgICAgIHkgPSBjb29yZHNbMiAqIG0gKyAxXTtcblxuICAgICAgICBpZiAoeCA+PSBtaW5YICYmIHggPD0gbWF4WCAmJiB5ID49IG1pblkgJiYgeSA8PSBtYXhZKSByZXN1bHQucHVzaChpZHNbbV0pO1xuXG4gICAgICAgIGNvbnN0IG5leHRBeGlzID0gKGF4aXMgKyAxKSAlIDI7XG5cbiAgICAgICAgaWYgKGF4aXMgPT09IDAgPyBtaW5YIDw9IHggOiBtaW5ZIDw9IHkpIHtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobGVmdCk7XG4gICAgICAgICAgICBzdGFjay5wdXNoKG0gLSAxKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobmV4dEF4aXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChheGlzID09PSAwID8gbWF4WCA+PSB4IDogbWF4WSA+PSB5KSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKG0gKyAxKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gocmlnaHQpO1xuICAgICAgICAgICAgc3RhY2sucHVzaChuZXh0QXhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENsdXN0ZXJPcHRpb25zIHtcbiAgcG9zaXRpb24/OiBnb29nbGUubWFwcy5MYXRMbmcgfCBnb29nbGUubWFwcy5MYXRMbmdMaXRlcmFsO1xuICBtYXJrZXJzPzogZ29vZ2xlLm1hcHMuTWFya2VyW107XG59XG5cbmV4cG9ydCBjbGFzcyBDbHVzdGVyIHtcbiAgcHVibGljIG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyO1xuICBwdWJsaWMgcmVhZG9ubHkgbWFya2Vycz86IGdvb2dsZS5tYXBzLk1hcmtlcltdO1xuICBwcm90ZWN0ZWQgX3Bvc2l0aW9uOiBnb29nbGUubWFwcy5MYXRMbmc7XG5cbiAgY29uc3RydWN0b3IoeyBtYXJrZXJzLCBwb3NpdGlvbiB9OiBDbHVzdGVyT3B0aW9ucykge1xuICAgIHRoaXMubWFya2VycyA9IG1hcmtlcnM7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIGdvb2dsZS5tYXBzLkxhdExuZykge1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IGJvdW5kcygpOiBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1hcmtlcnMubGVuZ3RoID09PSAwICYmICF0aGlzLl9wb3NpdGlvbikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzLnJlZHVjZSgoYm91bmRzLCBtYXJrZXIpID0+IHtcbiAgICAgIHJldHVybiBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgICB9LCBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbikpO1xuICB9XG5cbiAgcHVibGljIGdldCBwb3NpdGlvbigpOiBnb29nbGUubWFwcy5MYXRMbmcge1xuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbiB8fCB0aGlzLmJvdW5kcy5nZXRDZW50ZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvdW50IG9mICoqdmlzaWJsZSoqIG1hcmtlcnMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWFya2Vycy5maWx0ZXIoKG06IGdvb2dsZS5tYXBzLk1hcmtlcikgPT4gbS5nZXRWaXNpYmxlKCkpXG4gICAgICAubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG1hcmtlciB0byB0aGUgY2x1c3Rlci5cbiAgICovXG4gIHB1YmxpYyBwdXNoKG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIHJlZmVyZW5jZXMgYW5kIHJlbW92ZSBtYXJrZXIgZnJvbSBtYXAuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgZGVsZXRlIHRoaXMubWFya2VyO1xuICAgIH1cbiAgICB0aGlzLm1hcmtlcnMubGVuZ3RoID0gMDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDbHVzdGVyIH0gZnJvbSBcIi4uL2NsdXN0ZXJcIjtcbmltcG9ydCB7IGZpbHRlck1hcmtlcnNUb1BhZGRlZFZpZXdwb3J0IH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBbGdvcml0aG1JbnB1dCB7XG4gIC8qKlxuICAgKiBUaGUgbWFwIGNvbnRhaW5pbmcgdGhlIG1hcmtlcnMgYW5kIGNsdXN0ZXJzLlxuICAgKi9cbiAgbWFwOiBnb29nbGUubWFwcy5NYXA7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBtYXJrZXJzIHRvIGJlIGNsdXN0ZXJlZC5cbiAgICpcbiAgICogVGhlcmUgYXJlIHNvbWUgc3BlY2lmaWMgZWRnZSBjYXNlcyB0byBiZSBhd2FyZSBvZiBpbmNsdWRpbmcgdGhlIGZvbGxvd2luZzpcbiAgICogKiBNYXJrZXJzIHRoYXQgYXJlIG5vdCB2aXNpYmxlLlxuICAgKi9cbiAgbWFya2VyczogZ29vZ2xlLm1hcHMuTWFya2VyW107XG4gIC8qKlxuICAgKiBUaGUgYG1hcENhbnZhc1Byb2plY3Rpb25gIGVuYWJsZXMgZWFzeSBjb252ZXJzaW9uIGZyb20gbGF0L2xuZyB0byBwaXhlbC5cbiAgICpcbiAgICogQHNlZSBbTWFwQ2FudmFzUHJvamVjdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlL292ZXJsYXktdmlldyNNYXBDYW52YXNQcm9qZWN0aW9uKVxuICAgKi9cbiAgbWFwQ2FudmFzUHJvamVjdGlvbjogZ29vZ2xlLm1hcHMuTWFwQ2FudmFzUHJvamVjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGdvcml0aG1PdXRwdXQge1xuICAvKipcbiAgICogVGhlIGNsdXN0ZXJzIHJldHVybmVkIGJhc2VkIHVwb24gdGhlIHtAbGluayBBbGdvcml0aG1JbnB1dH0uXG4gICAqL1xuICBjbHVzdGVyczogQ2x1c3RlcltdO1xuICAvKipcbiAgICogQSBib29sZWFuIGZsYWcgaW5kaWNhdGluZyB0aGF0IHRoZSBjbHVzdGVycyBoYXZlIG5vdCBjaGFuZ2VkLlxuICAgKi9cbiAgY2hhbmdlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxnb3JpdGhtIHtcbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgYW4gYXJyYXkgb2Yge0BsaW5rIENsdXN0ZXJ9LlxuICAgKi9cbiAgY2FsY3VsYXRlOiAoeyBtYXJrZXJzLCBtYXAgfTogQWxnb3JpdGhtSW5wdXQpID0+IEFsZ29yaXRobU91dHB1dDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGdvcml0aG1PcHRpb25zIHtcbiAgbWF4Wm9vbT86IG51bWJlcjtcbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RBbGdvcml0aG0gaW1wbGVtZW50cyBBbGdvcml0aG0ge1xuICBwcm90ZWN0ZWQgbWF4Wm9vbTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHsgbWF4Wm9vbSA9IDE2IH06IEFsZ29yaXRobU9wdGlvbnMpIHtcbiAgICB0aGlzLm1heFpvb20gPSBtYXhab29tO1xuICB9XG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gYnlwYXNzIGNsdXN0ZXJpbmcgYmFzZWQgdXBvbiBzb21lIG1hcCBzdGF0ZSBzdWNoIGFzXG4gICAqIHpvb20sIG51bWJlciBvZiBtYXJrZXJzLCBldGMuXG4gICAqXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogIGNsdXN0ZXIoe21hcmtlcnMsIG1hcH06IEFsZ29yaXRobUlucHV0KTogQ2x1c3RlcltdIHtcbiAgICogICAgaWYgKHNob3VsZEJ5cGFzc0NsdXN0ZXJpbmcobWFwKSkge1xuICAgKiAgICAgIHJldHVybiB0aGlzLm5vb3Aoe21hcmtlcnMsIG1hcH0pXG4gICAqICAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHByb3RlY3RlZCBub29wKHsgbWFya2VycyB9OiBBbGdvcml0aG1JbnB1dCk6IENsdXN0ZXJbXSB7XG4gICAgcmV0dXJuIG5vb3AobWFya2Vycyk7XG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgYW4gYXJyYXkgb2Yge0BsaW5rIENsdXN0ZXJ9LiBDYWxjdWxhdGUgaXMgc2VwYXJhdGUgZnJvbVxuICAgKiB7QGxpbmsgY2x1c3Rlcn0gYXMgaXQgZG9lcyBwcmVwcm9jZXNzaW5nIG9uIHRoZSBtYXJrZXJzIHN1Y2ggYXMgZmlsdGVyaW5nXG4gICAqIGJhc2VkIHVwb24gdGhlIHZpZXdwb3J0IGFzIGluIHtAbGluayBBYnN0cmFjdFZpZXdwb3J0QWxnb3JpdGhtfS4gQ2FjaGluZ1xuICAgKiBhbmQgb3RoZXIgb3B0aW1pemF0aW9ucyBjYW4gYWxzbyBiZSBkb25lIGhlcmUuXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgY2FsY3VsYXRlKHsgbWFya2VycywgbWFwIH06IEFsZ29yaXRobUlucHV0KTogQWxnb3JpdGhtT3V0cHV0O1xuXG4gIC8qKlxuICAgKiBDbHVzdGVycyB0aGUgbWFya2VycyBhbmQgY2FsbGVkIGZyb20ge0BsaW5rIGNhbGN1bGF0ZX0uXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY2x1c3Rlcih7IG1hcmtlcnMsIG1hcCB9OiBBbGdvcml0aG1JbnB1dCk6IENsdXN0ZXJbXTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlld3BvcnRBbGdvcml0aG1PcHRpb25zIGV4dGVuZHMgQWxnb3JpdGhtT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHBpeGVscyB0byBleHRlbmQgYmV5b25kIHRoZSB2aWV3cG9ydCBib3VuZHMgd2hlbiBmaWx0ZXJpbmdcbiAgICogbWFya2VycyBwcmlvciB0byBjbHVzdGVyaW5nLlxuICAgKi9cbiAgdmlld3BvcnRQYWRkaW5nPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIEFic3RyYWN0IHZpZXdwb3J0IGFsZ29yaXRobSBwcm92ZXMgYSBjbGFzcyB0byBmaWx0ZXIgbWFya2VycyBieSBhIHBhZGRlZFxuICogdmlld3BvcnQuIFRoaXMgaXMgYSBjb21tb24gb3B0aW1pemF0aW9uLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Vmlld3BvcnRBbGdvcml0aG0gZXh0ZW5kcyBBYnN0cmFjdEFsZ29yaXRobSB7XG4gIHByb3RlY3RlZCB2aWV3cG9ydFBhZGRpbmcgPSA2MDtcblxuICBjb25zdHJ1Y3Rvcih7IHZpZXdwb3J0UGFkZGluZyA9IDYwLCAuLi5vcHRpb25zIH06IFZpZXdwb3J0QWxnb3JpdGhtT3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMudmlld3BvcnRQYWRkaW5nID0gdmlld3BvcnRQYWRkaW5nO1xuICB9XG4gIHB1YmxpYyBjYWxjdWxhdGUoe1xuICAgIG1hcmtlcnMsXG4gICAgbWFwLFxuICAgIG1hcENhbnZhc1Byb2plY3Rpb24sXG4gIH06IEFsZ29yaXRobUlucHV0KTogQWxnb3JpdGhtT3V0cHV0IHtcbiAgICBpZiAobWFwLmdldFpvb20oKSA+PSB0aGlzLm1heFpvb20pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNsdXN0ZXJzOiB0aGlzLm5vb3Aoe1xuICAgICAgICAgIG1hcmtlcnMsXG4gICAgICAgICAgbWFwLFxuICAgICAgICAgIG1hcENhbnZhc1Byb2plY3Rpb24sXG4gICAgICAgIH0pLFxuICAgICAgICBjaGFuZ2VkOiBmYWxzZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNsdXN0ZXJzOiB0aGlzLmNsdXN0ZXIoe1xuICAgICAgICBtYXJrZXJzOiBmaWx0ZXJNYXJrZXJzVG9QYWRkZWRWaWV3cG9ydChcbiAgICAgICAgICBtYXAsXG4gICAgICAgICAgbWFwQ2FudmFzUHJvamVjdGlvbixcbiAgICAgICAgICBtYXJrZXJzLFxuICAgICAgICAgIHRoaXMudmlld3BvcnRQYWRkaW5nXG4gICAgICAgICksXG4gICAgICAgIG1hcCxcbiAgICAgICAgbWFwQ2FudmFzUHJvamVjdGlvbixcbiAgICAgIH0pLFxuICAgIH07XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNsdXN0ZXIoeyBtYXJrZXJzLCBtYXAgfTogQWxnb3JpdGhtSW5wdXQpOiBDbHVzdGVyW107XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY29uc3Qgbm9vcCA9IChtYXJrZXJzOiBnb29nbGUubWFwcy5NYXJrZXJbXSk6IENsdXN0ZXJbXSA9PiB7XG4gIGNvbnN0IGNsdXN0ZXJzID0gbWFya2Vycy5tYXAoXG4gICAgKG1hcmtlcikgPT5cbiAgICAgIG5ldyBDbHVzdGVyKHtcbiAgICAgICAgcG9zaXRpb246IG1hcmtlci5nZXRQb3NpdGlvbigpLFxuICAgICAgICBtYXJrZXJzOiBbbWFya2VyXSxcbiAgICAgIH0pXG4gICk7XG4gIHJldHVybiBjbHVzdGVycztcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFic3RyYWN0QWxnb3JpdGhtLCBBbGdvcml0aG1JbnB1dCwgQWxnb3JpdGhtT3V0cHV0IH0gZnJvbSBcIi4vY29yZVwiO1xuaW1wb3J0IFN1cGVyQ2x1c3RlciwgeyBDbHVzdGVyRmVhdHVyZSB9IGZyb20gXCJzdXBlcmNsdXN0ZXJcIjtcblxuaW1wb3J0IHsgQ2x1c3RlciB9IGZyb20gXCIuLi9jbHVzdGVyXCI7XG5pbXBvcnQgZXF1YWwgZnJvbSBcImZhc3QtZGVlcC1lcXVhbFwiO1xuXG5leHBvcnQgdHlwZSBTdXBlckNsdXN0ZXJPcHRpb25zID0gU3VwZXJDbHVzdGVyLk9wdGlvbnM8XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHsgW25hbWU6IHN0cmluZ106IGFueSB9LFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICB7IFtuYW1lOiBzdHJpbmddOiBhbnkgfVxuPjtcblxuLyoqXG4gKiBBIHZlcnkgZmFzdCBKYXZhU2NyaXB0IGFsZ29yaXRobSBmb3IgZ2Vvc3BhdGlhbCBwb2ludCBjbHVzdGVyaW5nIHVzaW5nIEtEIHRyZWVzLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc3VwZXJjbHVzdGVyIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdXBlckNsdXN0ZXJBbGdvcml0aG0gZXh0ZW5kcyBBYnN0cmFjdEFsZ29yaXRobSB7XG4gIHByb3RlY3RlZCBzdXBlckNsdXN0ZXI6IFN1cGVyQ2x1c3RlcjtcbiAgcHJvdGVjdGVkIG1hcmtlcnM6IGdvb2dsZS5tYXBzLk1hcmtlcltdO1xuICBwcm90ZWN0ZWQgY2x1c3RlcnM6IENsdXN0ZXJbXTtcbiAgcHJvdGVjdGVkIHN0YXRlOiB7IHpvb206IG51bWJlciB9O1xuXG4gIGNvbnN0cnVjdG9yKHsgbWF4Wm9vbSwgcmFkaXVzID0gNjAsIC4uLm9wdGlvbnMgfTogU3VwZXJDbHVzdGVyT3B0aW9ucykge1xuICAgIHN1cGVyKHsgbWF4Wm9vbSB9KTtcblxuICAgIHRoaXMuc3VwZXJDbHVzdGVyID0gbmV3IFN1cGVyQ2x1c3Rlcih7XG4gICAgICBtYXhab29tOiB0aGlzLm1heFpvb20sXG4gICAgICByYWRpdXMsXG4gICAgICAuLi5vcHRpb25zLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHsgem9vbTogbnVsbCB9O1xuICB9XG4gIHB1YmxpYyBjYWxjdWxhdGUoaW5wdXQ6IEFsZ29yaXRobUlucHV0KTogQWxnb3JpdGhtT3V0cHV0IHtcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKCFlcXVhbChpbnB1dC5tYXJrZXJzLCB0aGlzLm1hcmtlcnMpKSB7XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIC8vIFRPRE8gdXNlIHByb3h5IHRvIGF2b2lkIGNvcHk/XG4gICAgICB0aGlzLm1hcmtlcnMgPSBbLi4uaW5wdXQubWFya2Vyc107XG5cbiAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMubWFya2Vycy5tYXAoKG1hcmtlcikgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiIGFzIGNvbnN0LFxuICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICB0eXBlOiBcIlBvaW50XCIgYXMgY29uc3QsXG4gICAgICAgICAgICBjb29yZGluYXRlczogW1xuICAgICAgICAgICAgICBtYXJrZXIuZ2V0UG9zaXRpb24oKS5sbmcoKSxcbiAgICAgICAgICAgICAgbWFya2VyLmdldFBvc2l0aW9uKCkubGF0KCksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvcGVydGllczogeyBtYXJrZXIgfSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnN1cGVyQ2x1c3Rlci5sb2FkKHBvaW50cyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB7IHpvb206IGlucHV0Lm1hcC5nZXRab29tKCkgfTtcblxuICAgIGlmICghY2hhbmdlZCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuem9vbSA+IHRoaXMubWF4Wm9vbSAmJiBzdGF0ZS56b29tID4gdGhpcy5tYXhab29tKSB7XG4gICAgICAgIC8vIHN0aWxsIGJleW9uZCBtYXhab29tLCBubyBjaGFuZ2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWQgPSBjaGFuZ2VkIHx8ICFlcXVhbCh0aGlzLnN0YXRlLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMuY2x1c3RlcnMgPSB0aGlzLmNsdXN0ZXIoaW5wdXQpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGNsdXN0ZXJzOiB0aGlzLmNsdXN0ZXJzLCBjaGFuZ2VkIH07XG4gIH1cblxuICBwdWJsaWMgY2x1c3Rlcih7IG1hcCB9OiBBbGdvcml0aG1JbnB1dCk6IENsdXN0ZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuc3VwZXJDbHVzdGVyXG4gICAgICAuZ2V0Q2x1c3RlcnMoWy0xODAsIC05MCwgMTgwLCA5MF0sIE1hdGgucm91bmQobWFwLmdldFpvb20oKSkpXG4gICAgICAubWFwKHRoaXMudHJhbnNmb3JtQ2x1c3Rlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0cmFuc2Zvcm1DbHVzdGVyKHtcbiAgICBnZW9tZXRyeToge1xuICAgICAgY29vcmRpbmF0ZXM6IFtsbmcsIGxhdF0sXG4gICAgfSxcbiAgICBwcm9wZXJ0aWVzLFxuICB9OiBDbHVzdGVyRmVhdHVyZTx7IG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyIH0+KTogQ2x1c3RlciB7XG4gICAgaWYgKHByb3BlcnRpZXMuY2x1c3Rlcikge1xuICAgICAgcmV0dXJuIG5ldyBDbHVzdGVyKHtcbiAgICAgICAgbWFya2VyczogdGhpcy5zdXBlckNsdXN0ZXJcbiAgICAgICAgICAuZ2V0TGVhdmVzKHByb3BlcnRpZXMuY2x1c3Rlcl9pZCwgSW5maW5pdHkpXG4gICAgICAgICAgLm1hcCgobGVhZikgPT4gbGVhZi5wcm9wZXJ0aWVzLm1hcmtlciksXG4gICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHsgbGF0LCBsbmcgfSksXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFya2VyID0gcHJvcGVydGllcy5tYXJrZXI7XG5cbiAgICAgIHJldHVybiBuZXcgQ2x1c3Rlcih7XG4gICAgICAgIG1hcmtlcnM6IFttYXJrZXJdLFxuICAgICAgICBwb3NpdGlvbjogbWFya2VyLmdldFBvc2l0aW9uKCksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ2x1c3RlciB9IGZyb20gXCIuL2NsdXN0ZXJcIjtcblxuLyoqXG4gKiBQcm92aWRlcyBzdGF0aXN0aWNzIG9uIGFsbCBjbHVzdGVycyBpbiB0aGUgY3VycmVudCByZW5kZXIgY3ljbGUgZm9yIHVzZSBpbiB7QGxpbmsgUmVuZGVyZXIucmVuZGVyfS5cbiAqL1xuZXhwb3J0IGNsYXNzIENsdXN0ZXJTdGF0cyB7XG4gIHB1YmxpYyByZWFkb25seSBtYXJrZXJzOiB7IHN1bTogbnVtYmVyIH07XG4gIHB1YmxpYyByZWFkb25seSBjbHVzdGVyczoge1xuICAgIGNvdW50OiBudW1iZXI7XG4gICAgbWFya2Vyczoge1xuICAgICAgbWVhbjogbnVtYmVyO1xuICAgICAgc3VtOiBudW1iZXI7XG4gICAgICBtaW46IG51bWJlcjtcbiAgICAgIG1heDogbnVtYmVyO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3RydWN0b3IobWFya2VyczogZ29vZ2xlLm1hcHMuTWFya2VyW10sIGNsdXN0ZXJzOiBDbHVzdGVyW10pIHtcbiAgICB0aGlzLm1hcmtlcnMgPSB7IHN1bTogbWFya2Vycy5sZW5ndGggfTtcblxuICAgIGNvbnN0IGNsdXN0ZXJNYXJrZXJDb3VudHMgPSBjbHVzdGVycy5tYXAoKGEpID0+IGEuY291bnQpO1xuICAgIGNvbnN0IGNsdXN0ZXJNYXJrZXJTdW0gPSBjbHVzdGVyTWFya2VyQ291bnRzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuXG4gICAgdGhpcy5jbHVzdGVycyA9IHtcbiAgICAgIGNvdW50OiBjbHVzdGVycy5sZW5ndGgsXG4gICAgICBtYXJrZXJzOiB7XG4gICAgICAgIG1lYW46IGNsdXN0ZXJNYXJrZXJTdW0gLyBjbHVzdGVycy5sZW5ndGgsXG4gICAgICAgIHN1bTogY2x1c3Rlck1hcmtlclN1bSxcbiAgICAgICAgbWluOiBNYXRoLm1pbiguLi5jbHVzdGVyTWFya2VyQ291bnRzKSxcbiAgICAgICAgbWF4OiBNYXRoLm1heCguLi5jbHVzdGVyTWFya2VyQ291bnRzKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlcmVyIHtcbiAgLyoqXG4gICAqIFR1cm4gYSB7QGxpbmsgQ2x1c3Rlcn0gaW50byBhIGBnb29nbGUubWFwcy5NYXJrZXJgLlxuICAgKlxuICAgKiBCZWxvdyBpcyBhIHNpbXBsZSBleGFtcGxlIHRvIGNyZWF0ZSBhIG1hcmtlciB3aXRoIHRoZSBudW1iZXIgb2YgbWFya2VycyBpbiB0aGUgY2x1c3RlciBhcyBhIGxhYmVsLlxuICAgKlxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICogICBwb3NpdGlvbixcbiAgICogICBsYWJlbDogU3RyaW5nKG1hcmtlcnMubGVuZ3RoKSxcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcmVuZGVyKGNsdXN0ZXI6IENsdXN0ZXIsIHN0YXRzOiBDbHVzdGVyU3RhdHMpOiBnb29nbGUubWFwcy5NYXJrZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0UmVuZGVyZXIgaW1wbGVtZW50cyBSZW5kZXJlciB7XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBsaWJyYXJ5IHVzZWQgYnkge0BsaW5rIE1hcmtlckNsdXN0ZXJlcn0uXG4gICAqXG4gICAqIEN1cnJlbnRseSBzZXQgdG8gdXNlIHRoZSBmb2xsb3dpbmc6XG4gICAqXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogLy8gY2hhbmdlIGNvbG9yIGlmIHRoaXMgY2x1c3RlciBoYXMgbW9yZSBtYXJrZXJzIHRoYW4gdGhlIG1lYW4gY2x1c3RlclxuICAgKiBjb25zdCBjb2xvciA9XG4gICAqICAgY291bnQgPiBNYXRoLm1heCgxMCwgc3RhdHMuY2x1c3RlcnMubWFya2Vycy5tZWFuKVxuICAgKiAgICAgPyBcIiNmZjAwMDBcIlxuICAgKiAgICAgOiBcIiMwMDAwZmZcIjtcbiAgICpcbiAgICogLy8gY3JlYXRlIHN2ZyB1cmwgd2l0aCBmaWxsIGNvbG9yXG4gICAqIGNvbnN0IHN2ZyA9IHdpbmRvdy5idG9hKGBcbiAgICogPHN2ZyBmaWxsPVwiJHtjb2xvcn1cIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNDAgMjQwXCI+XG4gICAqICAgPGNpcmNsZSBjeD1cIjEyMFwiIGN5PVwiMTIwXCIgb3BhY2l0eT1cIi42XCIgcj1cIjcwXCIgLz5cbiAgICogICA8Y2lyY2xlIGN4PVwiMTIwXCIgY3k9XCIxMjBcIiBvcGFjaXR5PVwiLjNcIiByPVwiOTBcIiAvPlxuICAgKiAgIDxjaXJjbGUgY3g9XCIxMjBcIiBjeT1cIjEyMFwiIG9wYWNpdHk9XCIuMlwiIHI9XCIxMTBcIiAvPlxuICAgKiAgIDxjaXJjbGUgY3g9XCIxMjBcIiBjeT1cIjEyMFwiIG9wYWNpdHk9XCIuMVwiIHI9XCIxMzBcIiAvPlxuICAgKiA8L3N2Zz5gKTtcbiAgICpcbiAgICogLy8gY3JlYXRlIG1hcmtlciB1c2luZyBzdmcgaWNvblxuICAgKiByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAqICAgcG9zaXRpb24sXG4gICAqICAgaWNvbjoge1xuICAgKiAgICAgdXJsOiBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke3N2Z31gLFxuICAgKiAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNDUsIDQ1KSxcbiAgICogICB9LFxuICAgKiAgIGxhYmVsOiB7XG4gICAqICAgICB0ZXh0OiBTdHJpbmcoY291bnQpLFxuICAgKiAgICAgY29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwwLjkpXCIsXG4gICAqICAgICBmb250U2l6ZTogXCIxMnB4XCIsXG4gICAqICAgfSxcbiAgICogICAvLyBhZGp1c3QgekluZGV4IHRvIGJlIGFib3ZlIG90aGVyIG1hcmtlcnNcbiAgICogICB6SW5kZXg6IDEwMDAgKyBjb3VudCxcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHJlbmRlcihcbiAgICB7IGNvdW50LCBwb3NpdGlvbiB9OiBDbHVzdGVyLFxuICAgIHN0YXRzOiBDbHVzdGVyU3RhdHNcbiAgKTogZ29vZ2xlLm1hcHMuTWFya2VyIHtcbiAgICAvLyBjaGFuZ2UgY29sb3IgaWYgdGhpcyBjbHVzdGVyIGhhcyBtb3JlIG1hcmtlcnMgdGhhbiB0aGUgbWVhbiBjbHVzdGVyXG4gICAgY29uc3QgY29sb3IgPVxuICAgICAgY291bnQgPiBNYXRoLm1heCgxMCwgc3RhdHMuY2x1c3RlcnMubWFya2Vycy5tZWFuKSA/IFwiI2ZmMDAwMFwiIDogXCIjMDAwMGZmXCI7XG5cbiAgICAvLyBjcmVhdGUgc3ZnIHVybCB3aXRoIGZpbGwgY29sb3JcbiAgICBjb25zdCBzdmcgPSB3aW5kb3cuYnRvYShgXG4gIDxzdmcgZmlsbD1cIiR7Y29sb3J9XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQwIDI0MFwiPlxuICAgIDxjaXJjbGUgY3g9XCIxMjBcIiBjeT1cIjEyMFwiIG9wYWNpdHk9XCIuNlwiIHI9XCI3MFwiIC8+XG4gICAgPGNpcmNsZSBjeD1cIjEyMFwiIGN5PVwiMTIwXCIgb3BhY2l0eT1cIi4zXCIgcj1cIjkwXCIgLz5cbiAgICA8Y2lyY2xlIGN4PVwiMTIwXCIgY3k9XCIxMjBcIiBvcGFjaXR5PVwiLjJcIiByPVwiMTEwXCIgLz5cbiAgPC9zdmc+YCk7XG5cbiAgICAvLyBjcmVhdGUgbWFya2VyIHVzaW5nIHN2ZyBpY29uXG4gICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgcG9zaXRpb24sXG4gICAgICBpY29uOiB7XG4gICAgICAgIHVybDogYGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsJHtzdmd9YCxcbiAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNDUsIDQ1KSxcbiAgICAgIH0sXG4gICAgICBsYWJlbDoge1xuICAgICAgICB0ZXh0OiBTdHJpbmcoY291bnQpLFxuICAgICAgICBjb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDAuOSlcIixcbiAgICAgICAgZm9udFNpemU6IFwiMTJweFwiLFxuICAgICAgfSxcbiAgICAgIHRpdGxlOiBgQ2x1c3RlciBvZiAke2NvdW50fSBtYXJrZXJzYCxcbiAgICAgIC8vIGFkanVzdCB6SW5kZXggdG8gYmUgYWJvdmUgb3RoZXIgbWFya2Vyc1xuICAgICAgekluZGV4OiBOdW1iZXIoZ29vZ2xlLm1hcHMuTWFya2VyLk1BWF9aSU5ERVgpICsgY291bnQsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlWaWV3U2FmZSBleHRlbmRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3IHt9XG5cbi8qKlxuICogRXh0ZW5kcyBhbiBvYmplY3QncyBwcm90b3R5cGUgYnkgYW5vdGhlcidzLlxuICpcbiAqIEBwYXJhbSB0eXBlMSBUaGUgVHlwZSB0byBiZSBleHRlbmRlZC5cbiAqIEBwYXJhbSB0eXBlMiBUaGUgVHlwZSB0byBleHRlbmQgd2l0aC5cbiAqIEBpZ25vcmVcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIGV4dGVuZCh0eXBlMTogYW55LCB0eXBlMjogYW55KTogdm9pZCB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgZm9yIChsZXQgcHJvcGVydHkgaW4gdHlwZTIucHJvdG90eXBlKSB7XG4gICAgdHlwZTEucHJvdG90eXBlW3Byb3BlcnR5XSA9IHR5cGUyLnByb3RvdHlwZVtwcm9wZXJ0eV07XG4gIH1cbn1cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydCBjbGFzcyBPdmVybGF5Vmlld1NhZmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBNYXJrZXJDbHVzdGVyZXIgaW1wbGVtZW50cyBnb29nbGUubWFwcy5PdmVybGF5VmlldyBpbnRlcmZhY2UuIFdlIHVzZSB0aGVcbiAgICAvLyBleHRlbmQgZnVuY3Rpb24gdG8gZXh0ZW5kIE1hcmtlckNsdXN0ZXJlciB3aXRoIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gICAgLy8gYmVjYXVzZSBpdCBtaWdodCBub3QgYWx3YXlzIGJlIGF2YWlsYWJsZSB3aGVuIHRoZSBjb2RlIGlzIGRlZmluZWQgc28gd2VcbiAgICAvLyBsb29rIGZvciBpdCBhdCB0aGUgbGFzdCBwb3NzaWJsZSBtb21lbnQuIElmIGl0IGRvZXNuJ3QgZXhpc3Qgbm93IHRoZW5cbiAgICAvLyB0aGVyZSBpcyBubyBwb2ludCBnb2luZyBhaGVhZCA6KVxuICAgIGV4dGVuZChPdmVybGF5Vmlld1NhZmUsIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBbGdvcml0aG0sIFN1cGVyQ2x1c3RlckFsZ29yaXRobSB9IGZyb20gXCIuL2FsZ29yaXRobXNcIjtcbmltcG9ydCB7IENsdXN0ZXJTdGF0cywgRGVmYXVsdFJlbmRlcmVyLCBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XG5cbmltcG9ydCB7IENsdXN0ZXIgfSBmcm9tIFwiLi9jbHVzdGVyXCI7XG5pbXBvcnQgeyBPdmVybGF5Vmlld1NhZmUgfSBmcm9tIFwiLi9vdmVybGF5LXZpZXctc2FmZVwiO1xuXG5leHBvcnQgdHlwZSBvbkNsdXN0ZXJDbGlja0hhbmRsZXIgPSAoXG4gIGV2ZW50OiBnb29nbGUubWFwcy5NYXBNb3VzZUV2ZW50LFxuICBjbHVzdGVyOiBDbHVzdGVyLFxuICBtYXA6IGdvb2dsZS5tYXBzLk1hcFxuKSA9PiB2b2lkO1xuZXhwb3J0IGludGVyZmFjZSBNYXJrZXJDbHVzdGVyZXJPcHRpb25zIHtcbiAgbWFya2Vycz86IGdvb2dsZS5tYXBzLk1hcmtlcltdO1xuICAvKipcbiAgICogQW4gYWxnb3JpdGhtIHRvIGNsdXN0ZXIgbWFya2Vycy4gRGVmYXVsdCBpcyB7QGxpbmsgU3VwZXJDbHVzdGVyQWxnb3JpdGhtfS4gTXVzdFxuICAgKiBwcm92aWRlIGEgYGNhbGN1bGF0ZWAgbWV0aG9kIGFjY2VwdGluZyB7QGxpbmsgQWxnb3JpdGhtSW5wdXR9IGFuZCByZXR1cm5pbmdcbiAgICogYW4gYXJyYXkgb2Yge0BsaW5rIENsdXN0ZXJ9LlxuICAgKi9cbiAgYWxnb3JpdGhtPzogQWxnb3JpdGhtO1xuICBtYXA/OiBnb29nbGUubWFwcy5NYXAgfCBudWxsO1xuICAvKipcbiAgICogQW4gb2JqZWN0IHRoYXQgY29udmVydHMgYSB7QGxpbmsgQ2x1c3Rlcn0gaW50byBhIGBnb29nbGUubWFwcy5NYXJrZXJgLlxuICAgKiBEZWZhdWx0IGlzIHtAbGluayBEZWZhdWx0UmVuZGVyZXJ9LlxuICAgKi9cbiAgcmVuZGVyZXI/OiBSZW5kZXJlcjtcbiAgb25DbHVzdGVyQ2xpY2s/OiBvbkNsdXN0ZXJDbGlja0hhbmRsZXI7XG59XG5cbmV4cG9ydCBlbnVtIE1hcmtlckNsdXN0ZXJlckV2ZW50cyB7XG4gIENMVVNURVJJTkdfQkVHSU4gPSBcImNsdXN0ZXJpbmdiZWdpblwiLFxuICBDTFVTVEVSSU5HX0VORCA9IFwiY2x1c3RlcmluZ2VuZFwiLFxuICBDTFVTVEVSX0NMSUNLID0gXCJjbGlja1wiLFxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdE9uQ2x1c3RlckNsaWNrSGFuZGxlcjogb25DbHVzdGVyQ2xpY2tIYW5kbGVyID0gKFxuICBfOiBnb29nbGUubWFwcy5NYXBNb3VzZUV2ZW50LFxuICBjbHVzdGVyOiBDbHVzdGVyLFxuICBtYXA6IGdvb2dsZS5tYXBzLk1hcFxuKTogdm9pZCA9PiB7XG4gIG1hcC5maXRCb3VuZHMoY2x1c3Rlci5ib3VuZHMpO1xufTtcbi8qKlxuICogTWFya2VyQ2x1c3RlcmVyIGNyZWF0ZXMgYW5kIG1hbmFnZXMgcGVyLXpvb20tbGV2ZWwgY2x1c3RlcnMgZm9yIGxhcmdlIGFtb3VudHNcbiAqIG9mIG1hcmtlcnMuIFNlZSB7QGxpbmsgTWFya2VyQ2x1c3RlcmVyT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXJrZXJDbHVzdGVyZXIgZXh0ZW5kcyBPdmVybGF5Vmlld1NhZmUge1xuICAvKiogQHNlZSB7QGxpbmsgTWFya2VyQ2x1c3RlcmVyT3B0aW9ucy5vbkNsdXN0ZXJDbGlja30gKi9cbiAgcHVibGljIG9uQ2x1c3RlckNsaWNrOiBvbkNsdXN0ZXJDbGlja0hhbmRsZXI7XG4gIC8qKiBAc2VlIHtAbGluayBNYXJrZXJDbHVzdGVyZXJPcHRpb25zLmFsZ29yaXRobX0gKi9cbiAgcHJvdGVjdGVkIGFsZ29yaXRobTogQWxnb3JpdGhtO1xuICBwcm90ZWN0ZWQgY2x1c3RlcnM6IENsdXN0ZXJbXTtcbiAgcHJvdGVjdGVkIG1hcmtlcnM6IGdvb2dsZS5tYXBzLk1hcmtlcltdO1xuICAvKiogQHNlZSB7QGxpbmsgTWFya2VyQ2x1c3RlcmVyT3B0aW9ucy5yZW5kZXJlcn0gKi9cbiAgcHJvdGVjdGVkIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgLyoqIEBzZWUge0BsaW5rIE1hcmtlckNsdXN0ZXJlck9wdGlvbnMubWFwfSAqL1xuICBwcm90ZWN0ZWQgbWFwOiBnb29nbGUubWFwcy5NYXAgfCBudWxsO1xuICAvKiogQHNlZSB7QGxpbmsgTWFya2VyQ2x1c3RlcmVyT3B0aW9ucy5tYXhab29tfSAqL1xuICBwcm90ZWN0ZWQgaWRsZUxpc3RlbmVyOiBnb29nbGUubWFwcy5NYXBzRXZlbnRMaXN0ZW5lcjtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgbWFwLFxuICAgIG1hcmtlcnMgPSBbXSxcbiAgICBhbGdvcml0aG0gPSBuZXcgU3VwZXJDbHVzdGVyQWxnb3JpdGhtKHt9KSxcbiAgICByZW5kZXJlciA9IG5ldyBEZWZhdWx0UmVuZGVyZXIoKSxcbiAgICBvbkNsdXN0ZXJDbGljayA9IGRlZmF1bHRPbkNsdXN0ZXJDbGlja0hhbmRsZXIsXG4gIH06IE1hcmtlckNsdXN0ZXJlck9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubWFya2VycyA9IFsuLi5tYXJrZXJzXTtcbiAgICB0aGlzLmNsdXN0ZXJzID0gW107XG5cbiAgICB0aGlzLmFsZ29yaXRobSA9IGFsZ29yaXRobTtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICB0aGlzLm9uQ2x1c3RlckNsaWNrID0gb25DbHVzdGVyQ2xpY2s7XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICB0aGlzLnNldE1hcChtYXApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRNYXJrZXIobWFya2VyOiBnb29nbGUubWFwcy5NYXJrZXIsIG5vRHJhdz86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tYXJrZXJzLmluY2x1ZGVzKG1hcmtlcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIGlmICghbm9EcmF3KSB7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRNYXJrZXJzKG1hcmtlcnM6IGdvb2dsZS5tYXBzLk1hcmtlcltdLCBub0RyYXc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgbWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIHRoaXMuYWRkTWFya2VyKG1hcmtlciwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIW5vRHJhdykge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTWFya2VyKG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyLCBub0RyYXc/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm1hcmtlcnMuaW5kZXhPZihtYXJrZXIpO1xuXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgLy8gTWFya2VyIGlzIG5vdCBpbiBvdXIgbGlzdCBvZiBtYXJrZXJzLCBzbyBkbyBub3RoaW5nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgdGhpcy5tYXJrZXJzLnNwbGljZShpbmRleCwgMSk7IC8vIFJlbW92ZSB0aGUgbWFya2VyIGZyb20gdGhlIGxpc3Qgb2YgbWFuYWdlZCBtYXJrZXJzXG5cbiAgICBpZiAoIW5vRHJhdykge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVNYXJrZXJzKFxuICAgIG1hcmtlcnM6IGdvb2dsZS5tYXBzLk1hcmtlcltdLFxuICAgIG5vRHJhdz86IGJvb2xlYW5cbiAgKTogYm9vbGVhbiB7XG4gICAgbGV0IHJlbW92ZWQgPSBmYWxzZTtcblxuICAgIG1hcmtlcnMuZm9yRWFjaCgobWFya2VyKSA9PiB7XG4gICAgICByZW1vdmVkID0gdGhpcy5yZW1vdmVNYXJrZXIobWFya2VyLCB0cnVlKSB8fCByZW1vdmVkO1xuICAgIH0pO1xuXG4gICAgaWYgKHJlbW92ZWQgJiYgIW5vRHJhdykge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVtb3ZlZDtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhck1hcmtlcnMobm9EcmF3PzogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMubWFya2Vycy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKCFub0RyYXcpIHtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsY3VsYXRlcyBhbmQgZHJhd3MgYWxsIHRoZSBtYXJrZXIgY2x1c3RlcnMuXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgaWYgKG1hcCBpbnN0YW5jZW9mIGdvb2dsZS5tYXBzLk1hcCAmJiB0aGlzLmdldFByb2plY3Rpb24oKSkge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihcbiAgICAgICAgdGhpcyxcbiAgICAgICAgTWFya2VyQ2x1c3RlcmVyRXZlbnRzLkNMVVNURVJJTkdfQkVHSU4sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGNsdXN0ZXJzLCBjaGFuZ2VkIH0gPSB0aGlzLmFsZ29yaXRobS5jYWxjdWxhdGUoe1xuICAgICAgICBtYXJrZXJzOiB0aGlzLm1hcmtlcnMsXG4gICAgICAgIG1hcCxcbiAgICAgICAgbWFwQ2FudmFzUHJvamVjdGlvbjogdGhpcy5nZXRQcm9qZWN0aW9uKCksXG4gICAgICB9KTtcblxuICAgICAgLy8gYWxsb3cgYWxnb3JpdGhtcyB0byByZXR1cm4gZmxhZyBvbiB3aGV0aGVyIHRoZSBjbHVzdGVycy9tYXJrZXJzIGhhdmUgY2hhbmdlZFxuICAgICAgaWYgKGNoYW5nZWQgfHwgY2hhbmdlZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gcmVzZXQgdmlzaWJpbGl0eSBvZiBtYXJrZXJzIGFuZCBjbHVzdGVyc1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgLy8gc3RvcmUgbmV3IGNsdXN0ZXJzXG4gICAgICAgIHRoaXMuY2x1c3RlcnMgPSBjbHVzdGVycztcblxuICAgICAgICB0aGlzLnJlbmRlckNsdXN0ZXJzKCk7XG4gICAgICB9XG4gICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKFxuICAgICAgICB0aGlzLFxuICAgICAgICBNYXJrZXJDbHVzdGVyZXJFdmVudHMuQ0xVU1RFUklOR19FTkQsXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQWRkKCk6IHZvaWQge1xuICAgIHRoaXMuaWRsZUxpc3RlbmVyID0gdGhpcy5nZXRNYXAoKS5hZGRMaXN0ZW5lcihcbiAgICAgIFwiaWRsZVwiLFxuICAgICAgdGhpcy5yZW5kZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlbW92ZSgpOiB2b2lkIHtcbiAgICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcih0aGlzLmlkbGVMaXN0ZW5lcik7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IG1hcmtlci5zZXRNYXAobnVsbCkpO1xuICAgIHRoaXMuY2x1c3RlcnMuZm9yRWFjaCgoY2x1c3RlcikgPT4gY2x1c3Rlci5kZWxldGUoKSk7XG4gICAgdGhpcy5jbHVzdGVycyA9IFtdO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlckNsdXN0ZXJzKCk6IHZvaWQge1xuICAgIC8vIGdlbmVyYXRlIHN0YXRzIHRvIHBhc3MgdG8gcmVuZGVyZXJzXG4gICAgY29uc3Qgc3RhdHMgPSBuZXcgQ2x1c3RlclN0YXRzKHRoaXMubWFya2VycywgdGhpcy5jbHVzdGVycyk7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKSBhcyBnb29nbGUubWFwcy5NYXA7XG5cbiAgICB0aGlzLmNsdXN0ZXJzLmZvckVhY2goKGNsdXN0ZXIpID0+IHtcbiAgICAgIGlmIChjbHVzdGVyLm1hcmtlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNsdXN0ZXIubWFya2VyID0gY2x1c3Rlci5tYXJrZXJzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2x1c3Rlci5tYXJrZXIgPSB0aGlzLnJlbmRlcmVyLnJlbmRlcihjbHVzdGVyLCBzdGF0cyk7XG5cbiAgICAgICAgaWYgKHRoaXMub25DbHVzdGVyQ2xpY2spIHtcbiAgICAgICAgICBjbHVzdGVyLm1hcmtlci5hZGRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAoZXZlbnQ6IGdvb2dsZS5tYXBzLk1hcE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIE1hcmtlckNsdXN0ZXJlckV2ZW50cy5DTFVTVEVSX0NMSUNLLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgdGhpcy5vbkNsdXN0ZXJDbGljayhldmVudCwgY2x1c3RlciwgbWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNsdXN0ZXIubWFya2VyLnNldE1hcChtYXApO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBXZWJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuaW1wb3J0IHR5cGUge1xuICBDbHVzdGVyLFxuICBvbkNsdXN0ZXJDbGlja0hhbmRsZXIsXG59IGZyb20gJ0Bnb29nbGVtYXBzL21hcmtlcmNsdXN0ZXJlcic7XG5pbXBvcnQgeyBNYXJrZXJDbHVzdGVyZXIgfSBmcm9tICdAZ29vZ2xlbWFwcy9tYXJrZXJjbHVzdGVyZXInO1xuXG5pbXBvcnQgdHlwZSB7IExhdExuZ0JvdW5kcywgTWFya2VyIH0gZnJvbSAnLi9kZWZpbml0aW9ucyc7XG5pbXBvcnQgdHlwZSB7XG4gIEFjY0VsZW1lbnRzQXJncyxcbiAgQWRkTWFya2VyQXJncyxcbiAgQ2FtZXJhQXJncyxcbiAgQWRkTWFya2Vyc0FyZ3MsXG4gIENhcGFjaXRvckdvb2dsZU1hcHNQbHVnaW4sXG4gIENyZWF0ZU1hcEFyZ3MsXG4gIEN1cnJlbnRMb2NBcmdzLFxuICBEZXN0cm95TWFwQXJncyxcbiAgSW5kb29yTWFwQXJncyxcbiAgTWFwVHlwZUFyZ3MsXG4gIFBhZGRpbmdBcmdzLFxuICBSZW1vdmVNYXJrZXJBcmdzLFxuICBUcmFmZmljTGF5ZXJBcmdzLFxuICBSZW1vdmVNYXJrZXJzQXJncyxcbiAgT25TY3JvbGxBcmdzLFxufSBmcm9tICcuL2ltcGxlbWVudGF0aW9uJztcblxuZXhwb3J0IGNsYXNzIENhcGFjaXRvckdvb2dsZU1hcHNXZWJcbiAgZXh0ZW5kcyBXZWJQbHVnaW5cbiAgaW1wbGVtZW50cyBDYXBhY2l0b3JHb29nbGVNYXBzUGx1Z2luXG57XG4gIHByaXZhdGUgZ01hcHNSZWY6IHR5cGVvZiBnb29nbGUubWFwcyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBtYXBzOiB7XG4gICAgW2lkOiBzdHJpbmddOiB7XG4gICAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICAgIG1hcDogZ29vZ2xlLm1hcHMuTWFwO1xuICAgICAgbWFya2Vyczoge1xuICAgICAgICBbaWQ6IHN0cmluZ106IGdvb2dsZS5tYXBzLk1hcmtlcjtcbiAgICAgIH07XG4gICAgICBtYXJrZXJDbHVzdGVyZXI/OiBNYXJrZXJDbHVzdGVyZXI7XG4gICAgICB0cmFmZmljTGF5ZXI/OiBnb29nbGUubWFwcy5UcmFmZmljTGF5ZXI7XG4gICAgfTtcbiAgfSA9IHt9O1xuICBwcml2YXRlIGN1cnJNYXJrZXJJZCA9IDA7XG5cbiAgcHJpdmF0ZSBvbkNsdXN0ZXJDbGlja0hhbmRsZXI6IG9uQ2x1c3RlckNsaWNrSGFuZGxlciA9IChcbiAgICBfOiBnb29nbGUubWFwcy5NYXBNb3VzZUV2ZW50LFxuICAgIGNsdXN0ZXI6IENsdXN0ZXIsXG4gICAgbWFwOiBnb29nbGUubWFwcy5NYXAsXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IG1hcElkID0gdGhpcy5nZXRJZEZyb21NYXAobWFwKTtcbiAgICBjb25zdCBpdGVtczogYW55W10gPSBbXTtcblxuICAgIGlmIChjbHVzdGVyLm1hcmtlcnMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiBjbHVzdGVyLm1hcmtlcnMpIHtcbiAgICAgICAgY29uc3QgbWFya2VySWQgPSB0aGlzLmdldElkRnJvbU1hcmtlcihtYXBJZCwgbWFya2VyKTtcblxuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICBtYXJrZXJJZDogbWFya2VySWQsXG4gICAgICAgICAgbGF0aXR1ZGU6IG1hcmtlci5nZXRQb3NpdGlvbigpPy5sYXQoKSxcbiAgICAgICAgICBsb25naXR1ZGU6IG1hcmtlci5nZXRQb3NpdGlvbigpPy5sbmcoKSxcbiAgICAgICAgICB0aXRsZTogbWFya2VyLmdldFRpdGxlKCksXG4gICAgICAgICAgc25pcHBldDogJycsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbkNsdXN0ZXJDbGljaycsIHtcbiAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgIGxhdGl0dWRlOiBjbHVzdGVyLnBvc2l0aW9uLmxhdCgpLFxuICAgICAgbG9uZ2l0dWRlOiBjbHVzdGVyLnBvc2l0aW9uLmxuZygpLFxuICAgICAgc2l6ZTogY2x1c3Rlci5jb3VudCxcbiAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIGdldElkRnJvbU1hcChtYXA6IGdvb2dsZS5tYXBzLk1hcCk6IHN0cmluZyB7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLm1hcHMpIHtcbiAgICAgIGlmICh0aGlzLm1hcHNbaWRdLm1hcCA9PSBtYXApIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0SWRGcm9tTWFya2VyKG1hcElkOiBzdHJpbmcsIG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyKTogc3RyaW5nIHtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMubWFwc1ttYXBJZF0ubWFya2Vycykge1xuICAgICAgaWYgKHRoaXMubWFwc1ttYXBJZF0ubWFya2Vyc1tpZF0gPT0gbWFya2VyKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGltcG9ydEdvb2dsZUxpYihhcGlLZXk6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmdNYXBzUmVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGxpYiA9IGF3YWl0IGltcG9ydCgnQGdvb2dsZW1hcHMvanMtYXBpLWxvYWRlcicpO1xuICAgICAgY29uc3QgbG9hZGVyID0gbmV3IGxpYi5Mb2FkZXIoe1xuICAgICAgICBhcGlLZXk6IGFwaUtleSA/PyAnJyxcbiAgICAgICAgdmVyc2lvbjogJ3dlZWtseScsXG4gICAgICAgIGxpYnJhcmllczogWydwbGFjZXMnXSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZ29vZ2xlID0gYXdhaXQgbG9hZGVyLmxvYWQoKTtcbiAgICAgIHRoaXMuZ01hcHNSZWYgPSBnb29nbGUubWFwcztcbiAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgZ29vZ2xlIG1hcHMgQVBJJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0Q2FtZXJhKF9hcmdzOiBDYW1lcmFBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQW5pbWF0aW9uIG5vdCBzdXBwb3J0ZWQgeWV0Li4uXG4gICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAubW92ZUNhbWVyYSh7XG4gICAgICBjZW50ZXI6IF9hcmdzLmNvbmZpZy5jb29yZGluYXRlLFxuICAgICAgaGVhZGluZzogX2FyZ3MuY29uZmlnLmJlYXJpbmcsXG4gICAgICB0aWx0OiBfYXJncy5jb25maWcuYW5nbGUsXG4gICAgICB6b29tOiBfYXJncy5jb25maWcuem9vbSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNldE1hcFR5cGUoX2FyZ3M6IE1hcFR5cGVBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAuc2V0TWFwVHlwZUlkKF9hcmdzLm1hcFR5cGUpO1xuICB9XG5cbiAgYXN5bmMgZW5hYmxlSW5kb29yTWFwcyhfYXJnczogSW5kb29yTWFwQXJncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBzdXBwb3J0ZWQgb24gd2ViLicpO1xuICB9XG5cbiAgYXN5bmMgZW5hYmxlVHJhZmZpY0xheWVyKF9hcmdzOiBUcmFmZmljTGF5ZXJBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdHJhZmZpY0xheWVyID1cbiAgICAgIHRoaXMubWFwc1tfYXJncy5pZF0udHJhZmZpY0xheWVyID8/IG5ldyBnb29nbGUubWFwcy5UcmFmZmljTGF5ZXIoKTtcblxuICAgIGlmIChfYXJncy5lbmFibGVkKSB7XG4gICAgICB0cmFmZmljTGF5ZXIuc2V0TWFwKHRoaXMubWFwc1tfYXJncy5pZF0ubWFwKTtcbiAgICAgIHRoaXMubWFwc1tfYXJncy5pZF0udHJhZmZpY0xheWVyID0gdHJhZmZpY0xheWVyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tYXBzW19hcmdzLmlkXS50cmFmZmljTGF5ZXIpIHtcbiAgICAgIHRyYWZmaWNMYXllci5zZXRNYXAobnVsbCk7XG4gICAgICB0aGlzLm1hcHNbX2FyZ3MuaWRdLnRyYWZmaWNMYXllciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBlbmFibGVBY2Nlc3NpYmlsaXR5RWxlbWVudHMoX2FyZ3M6IEFjY0VsZW1lbnRzQXJncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBzdXBwb3J0ZWQgb24gd2ViLicpO1xuICB9XG5cbiAgZGlzcGF0Y2hNYXBFdmVudChfYXJnczogeyBpZDogc3RyaW5nIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3Qgc3VwcG9ydGVkIG9uIHdlYi4nKTtcbiAgfVxuXG4gIGFzeW5jIGVuYWJsZUN1cnJlbnRMb2NhdGlvbihfYXJnczogQ3VycmVudExvY0FyZ3MpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoX2FyZ3MuZW5hYmxlZCkge1xuICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgIChwb3NpdGlvbjogR2VvbG9jYXRpb25Qb3NpdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcG9zID0ge1xuICAgICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAuc2V0Q2VudGVyKHBvcyk7XG5cbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbk15TG9jYXRpb25CdXR0b25DbGljaycsIHt9KTtcblxuICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ29uTXlMb2NhdGlvbkNsaWNrJywge30pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHZW9sb2NhdGlvbiBub3Qgc3VwcG9ydGVkIG9uIHdlYiBicm93c2VyLicpO1xuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dlb2xvY2F0aW9uIG5vdCBzdXBwb3J0ZWQgb24gd2ViIGJyb3dzZXIuJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIHNldFBhZGRpbmcoX2FyZ3M6IFBhZGRpbmdBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYm91bmRzID0gdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoYm91bmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubWFwc1tfYXJncy5pZF0ubWFwLmZpdEJvdW5kcyhib3VuZHMsIF9hcmdzLnBhZGRpbmcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldE1hcEJvdW5kcyhfYXJnczogeyBpZDogc3RyaW5nIH0pOiBQcm9taXNlPExhdExuZ0JvdW5kcz4ge1xuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMubWFwc1tfYXJncy5pZF0ubWFwLmdldEJvdW5kcygpO1xuXG4gICAgaWYgKCFib3VuZHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIE1hcCBCb3VuZHMgY291bGQgbm90IGJlIGZvdW5kLicpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzb3V0aHdlc3Q6IHtcbiAgICAgICAgbGF0OiBib3VuZHMuZ2V0U291dGhXZXN0KCkubGF0KCksXG4gICAgICAgIGxuZzogYm91bmRzLmdldFNvdXRoV2VzdCgpLmxuZygpLFxuICAgICAgfSxcbiAgICAgIGNlbnRlcjoge1xuICAgICAgICBsYXQ6IGJvdW5kcy5nZXRDZW50ZXIoKS5sYXQoKSxcbiAgICAgICAgbG5nOiBib3VuZHMuZ2V0Q2VudGVyKCkubG5nKCksXG4gICAgICB9LFxuICAgICAgbm9ydGhlYXN0OiB7XG4gICAgICAgIGxhdDogYm91bmRzLmdldE5vcnRoRWFzdCgpLmxhdCgpLFxuICAgICAgICBsbmc6IGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sbmcoKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGFkZE1hcmtlcnMoX2FyZ3M6IEFkZE1hcmtlcnNBcmdzKTogUHJvbWlzZTx7IGlkczogc3RyaW5nW10gfT4ge1xuICAgIGNvbnN0IG1hcmtlcklkczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBtYXAgPSB0aGlzLm1hcHNbX2FyZ3MuaWRdO1xuXG4gICAgZm9yIChjb25zdCBtYXJrZXJBcmdzIG9mIF9hcmdzLm1hcmtlcnMpIHtcbiAgICAgIGNvbnN0IG1hcmtlck9wdHMgPSB0aGlzLmJ1aWxkTWFya2VyT3B0cyhtYXJrZXJBcmdzLCBtYXAubWFwKTtcbiAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0cyk7XG5cbiAgICAgIGNvbnN0IGlkID0gJycgKyB0aGlzLmN1cnJNYXJrZXJJZDtcblxuICAgICAgbWFwLm1hcmtlcnNbaWRdID0gbWFya2VyO1xuICAgICAgdGhpcy5zZXRNYXJrZXJMaXN0ZW5lcnMoX2FyZ3MuaWQsIGlkLCBtYXJrZXIpO1xuXG4gICAgICBtYXJrZXJJZHMucHVzaChpZCk7XG4gICAgICB0aGlzLmN1cnJNYXJrZXJJZCsrO1xuICAgIH1cblxuICAgIHJldHVybiB7IGlkczogbWFya2VySWRzIH07XG4gIH1cblxuICBhc3luYyBhZGRNYXJrZXIoX2FyZ3M6IEFkZE1hcmtlckFyZ3MpOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgbWFya2VyT3B0cyA9IHRoaXMuYnVpbGRNYXJrZXJPcHRzKFxuICAgICAgX2FyZ3MubWFya2VyLFxuICAgICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAsXG4gICAgKTtcblxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0cyk7XG5cbiAgICBjb25zdCBpZCA9ICcnICsgdGhpcy5jdXJyTWFya2VySWQ7XG5cbiAgICB0aGlzLm1hcHNbX2FyZ3MuaWRdLm1hcmtlcnNbaWRdID0gbWFya2VyO1xuICAgIHRoaXMuc2V0TWFya2VyTGlzdGVuZXJzKF9hcmdzLmlkLCBpZCwgbWFya2VyKTtcblxuICAgIHRoaXMuY3Vyck1hcmtlcklkKys7XG5cbiAgICByZXR1cm4geyBpZDogaWQgfTtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZU1hcmtlcnMoX2FyZ3M6IFJlbW92ZU1hcmtlcnNBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5tYXBzW19hcmdzLmlkXTtcblxuICAgIGZvciAoY29uc3QgaWQgb2YgX2FyZ3MubWFya2VySWRzKSB7XG4gICAgICBtYXAubWFya2Vyc1tpZF0uc2V0TWFwKG51bGwpO1xuICAgICAgZGVsZXRlIG1hcC5tYXJrZXJzW2lkXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVNYXJrZXIoX2FyZ3M6IFJlbW92ZU1hcmtlckFyZ3MpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLm1hcHNbX2FyZ3MuaWRdLm1hcmtlcnNbX2FyZ3MubWFya2VySWRdLnNldE1hcChudWxsKTtcbiAgICBkZWxldGUgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXJrZXJzW19hcmdzLm1hcmtlcklkXTtcbiAgfVxuXG4gIGFzeW5jIGVuYWJsZUNsdXN0ZXJpbmcoX2FyZ3M6IHsgaWQ6IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbWFya2VyczogZ29vZ2xlLm1hcHMuTWFya2VyW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5tYXBzW19hcmdzLmlkXS5tYXJrZXJzKSB7XG4gICAgICBtYXJrZXJzLnB1c2godGhpcy5tYXBzW19hcmdzLmlkXS5tYXJrZXJzW2lkXSk7XG4gICAgfVxuXG4gICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXJrZXJDbHVzdGVyZXIgPSBuZXcgTWFya2VyQ2x1c3RlcmVyKHtcbiAgICAgIG1hcDogdGhpcy5tYXBzW19hcmdzLmlkXS5tYXAsXG4gICAgICBtYXJrZXJzOiBtYXJrZXJzLFxuICAgICAgb25DbHVzdGVyQ2xpY2s6IHRoaXMub25DbHVzdGVyQ2xpY2tIYW5kbGVyLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGlzYWJsZUNsdXN0ZXJpbmcoX2FyZ3M6IHsgaWQ6IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5tYXBzW19hcmdzLmlkXS5tYXJrZXJDbHVzdGVyZXI/LnNldE1hcChudWxsKTtcbiAgICB0aGlzLm1hcHNbX2FyZ3MuaWRdLm1hcmtlckNsdXN0ZXJlciA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGFzeW5jIG9uU2Nyb2xsKF9hcmdzOiBPblNjcm9sbEFyZ3MpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3Qgc3VwcG9ydGVkIG9uIHdlYi4nKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZShfYXJnczogQ3JlYXRlTWFwQXJncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKGBDcmVhdGUgbWFwOiAke19hcmdzLmlkfWApO1xuICAgIGF3YWl0IHRoaXMuaW1wb3J0R29vZ2xlTGliKF9hcmdzLmFwaUtleSk7XG4gICAgdGhpcy5tYXBzW19hcmdzLmlkXSA9IHtcbiAgICAgIG1hcDogbmV3IHdpbmRvdy5nb29nbGUubWFwcy5NYXAoX2FyZ3MuZWxlbWVudCwgeyAuLi5fYXJncy5jb25maWcgfSksXG4gICAgICBlbGVtZW50OiBfYXJncy5lbGVtZW50LFxuICAgICAgbWFya2Vyczoge30sXG4gICAgfTtcbiAgICB0aGlzLnNldE1hcExpc3RlbmVycyhfYXJncy5pZCk7XG4gIH1cblxuICBhc3luYyBkZXN0cm95KF9hcmdzOiBEZXN0cm95TWFwQXJncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKGBEZXN0cm95IG1hcDogJHtfYXJncy5pZH1gKTtcbiAgICBjb25zdCBtYXBJdGVtID0gdGhpcy5tYXBzW19hcmdzLmlkXTtcbiAgICBtYXBJdGVtLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgbWFwSXRlbS5tYXAudW5iaW5kQWxsKCk7XG4gICAgZGVsZXRlIHRoaXMubWFwc1tfYXJncy5pZF07XG4gIH1cblxuICBhc3luYyBzZXRNYXJrZXJMaXN0ZW5lcnMoXG4gICAgbWFwSWQ6IHN0cmluZyxcbiAgICBtYXJrZXJJZDogc3RyaW5nLFxuICAgIG1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ29uTWFya2VyQ2xpY2snLCB7XG4gICAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgICAgbWFya2VySWQ6IG1hcmtlcklkLFxuICAgICAgICBsYXRpdHVkZTogbWFya2VyLmdldFBvc2l0aW9uKCk/LmxhdCgpLFxuICAgICAgICBsb25naXR1ZGU6IG1hcmtlci5nZXRQb3NpdGlvbigpPy5sbmcoKSxcbiAgICAgICAgdGl0bGU6IG1hcmtlci5nZXRUaXRsZSgpLFxuICAgICAgICBzbmlwcGV0OiAnJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWFya2VyLmFkZExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoKSA9PiB7XG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnb25NYXJrZXJEcmFnU3RhcnQnLCB7XG4gICAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgICAgbWFya2VySWQ6IG1hcmtlcklkLFxuICAgICAgICBsYXRpdHVkZTogbWFya2VyLmdldFBvc2l0aW9uKCk/LmxhdCgpLFxuICAgICAgICBsb25naXR1ZGU6IG1hcmtlci5nZXRQb3NpdGlvbigpPy5sbmcoKSxcbiAgICAgICAgdGl0bGU6IG1hcmtlci5nZXRUaXRsZSgpLFxuICAgICAgICBzbmlwcGV0OiAnJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWFya2VyLmFkZExpc3RlbmVyKCdkcmFnJywgKCkgPT4ge1xuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ29uTWFya2VyRHJhZycsIHtcbiAgICAgICAgbWFwSWQ6IG1hcElkLFxuICAgICAgICBtYXJrZXJJZDogbWFya2VySWQsXG4gICAgICAgIGxhdGl0dWRlOiBtYXJrZXIuZ2V0UG9zaXRpb24oKT8ubGF0KCksXG4gICAgICAgIGxvbmdpdHVkZTogbWFya2VyLmdldFBvc2l0aW9uKCk/LmxuZygpLFxuICAgICAgICB0aXRsZTogbWFya2VyLmdldFRpdGxlKCksXG4gICAgICAgIHNuaXBwZXQ6ICcnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7XG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnb25NYXJrZXJEcmFnRW5kJywge1xuICAgICAgICBtYXBJZDogbWFwSWQsXG4gICAgICAgIG1hcmtlcklkOiBtYXJrZXJJZCxcbiAgICAgICAgbGF0aXR1ZGU6IG1hcmtlci5nZXRQb3NpdGlvbigpPy5sYXQoKSxcbiAgICAgICAgbG9uZ2l0dWRlOiBtYXJrZXIuZ2V0UG9zaXRpb24oKT8ubG5nKCksXG4gICAgICAgIHRpdGxlOiBtYXJrZXIuZ2V0VGl0bGUoKSxcbiAgICAgICAgc25pcHBldDogJycsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNldE1hcExpc3RlbmVycyhtYXBJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5tYXBzW21hcElkXS5tYXA7XG5cbiAgICBtYXAuYWRkTGlzdGVuZXIoJ2lkbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBib3VuZHMgPSBhd2FpdCB0aGlzLmdldE1hcEJvdW5kcyh7IGlkOiBtYXBJZCB9KTtcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbkNhbWVyYUlkbGUnLCB7XG4gICAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgICAgYmVhcmluZzogbWFwLmdldEhlYWRpbmcoKSxcbiAgICAgICAgYm91bmRzOiBib3VuZHMsXG4gICAgICAgIGxhdGl0dWRlOiBtYXAuZ2V0Q2VudGVyKCk/LmxhdCgpLFxuICAgICAgICBsb25naXR1ZGU6IG1hcC5nZXRDZW50ZXIoKT8ubG5nKCksXG4gICAgICAgIHRpbHQ6IG1hcC5nZXRUaWx0KCksXG4gICAgICAgIHpvb206IG1hcC5nZXRab29tKCksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1hcC5hZGRMaXN0ZW5lcignY2VudGVyX2NoYW5nZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnb25DYW1lcmFNb3ZlU3RhcnRlZCcsIHtcbiAgICAgICAgbWFwSWQ6IG1hcElkLFxuICAgICAgICBpc0dlc3R1cmU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1hcC5hZGRMaXN0ZW5lcignYm91bmRzX2NoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBib3VuZHMgPSBhd2FpdCB0aGlzLmdldE1hcEJvdW5kcyh7IGlkOiBtYXBJZCB9KTtcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbkJvdW5kc0NoYW5nZWQnLCB7XG4gICAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgICAgYmVhcmluZzogbWFwLmdldEhlYWRpbmcoKSxcbiAgICAgICAgYm91bmRzOiBib3VuZHMsXG4gICAgICAgIGxhdGl0dWRlOiBtYXAuZ2V0Q2VudGVyKCk/LmxhdCgpLFxuICAgICAgICBsb25naXR1ZGU6IG1hcC5nZXRDZW50ZXIoKT8ubG5nKCksXG4gICAgICAgIHRpbHQ6IG1hcC5nZXRUaWx0KCksXG4gICAgICAgIHpvb206IG1hcC5nZXRab29tKCksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1hcC5hZGRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsXG4gICAgICAoZTogZ29vZ2xlLm1hcHMuTWFwTW91c2VFdmVudCB8IGdvb2dsZS5tYXBzLkljb25Nb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbk1hcENsaWNrJywge1xuICAgICAgICAgIG1hcElkOiBtYXBJZCxcbiAgICAgICAgICBsYXRpdHVkZTogZS5sYXRMbmc/LmxhdCgpLFxuICAgICAgICAgIGxvbmdpdHVkZTogZS5sYXRMbmc/LmxuZygpLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdvbk1hcFJlYWR5Jywge1xuICAgICAgbWFwSWQ6IG1hcElkLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1hcmtlck9wdHMoXG4gICAgbWFya2VyOiBNYXJrZXIsXG4gICAgbWFwOiBnb29nbGUubWFwcy5NYXAsXG4gICk6IGdvb2dsZS5tYXBzLk1hcmtlck9wdGlvbnMge1xuICAgIGxldCBpY29uSW1hZ2U6IGdvb2dsZS5tYXBzLkljb24gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgaWYgKG1hcmtlci5pY29uVXJsKSB7XG4gICAgICBpY29uSW1hZ2UgPSB7XG4gICAgICAgIHVybDogbWFya2VyLmljb25VcmwsXG4gICAgICAgIHNjYWxlZFNpemU6IG1hcmtlci5pY29uU2l6ZVxuICAgICAgICAgID8gbmV3IGdvb2dsZS5tYXBzLlNpemUobWFya2VyLmljb25TaXplLndpZHRoLCBtYXJrZXIuaWNvblNpemUuaGVpZ2h0KVxuICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgYW5jaG9yOiBtYXJrZXIuaWNvbkFuY2hvclxuICAgICAgICAgID8gbmV3IGdvb2dsZS5tYXBzLlBvaW50KG1hcmtlci5pY29uQW5jaG9yLngsIG1hcmtlci5pY29uQW5jaG9yLnkpXG4gICAgICAgICAgOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgIG9yaWdpbjogbWFya2VyLmljb25PcmlnaW5cbiAgICAgICAgICA/IG5ldyBnb29nbGUubWFwcy5Qb2ludChtYXJrZXIuaWNvbk9yaWdpbi54LCBtYXJrZXIuaWNvbk9yaWdpbi55KVxuICAgICAgICAgIDogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRzOiBnb29nbGUubWFwcy5NYXJrZXJPcHRpb25zID0ge1xuICAgICAgcG9zaXRpb246IG1hcmtlci5jb29yZGluYXRlLFxuICAgICAgbWFwOiBtYXAsXG4gICAgICBvcGFjaXR5OiBtYXJrZXIub3BhY2l0eSxcbiAgICAgIHRpdGxlOiBtYXJrZXIudGl0bGUsXG4gICAgICBpY29uOiBpY29uSW1hZ2UsXG4gICAgICBkcmFnZ2FibGU6IG1hcmtlci5kcmFnZ2FibGUsXG4gICAgfTtcblxuICAgIHJldHVybiBvcHRzO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGRvIG5vdCBlZGl0IC5qcyBmaWxlcyBkaXJlY3RseSAtIGVkaXQgc3JjL2luZGV4LmpzdFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09ICdvYmplY3QnICYmIHR5cGVvZiBiID09ICdvYmplY3QnKSB7XG4gICAgaWYgKGEuY29uc3RydWN0b3IgIT09IGIuY29uc3RydWN0b3IpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciBsZW5ndGgsIGksIGtleXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICBpZiAoIWVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKTtcbiAgICBpZiAoYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmICghZXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEhPT1hICYmIGIhPT1iO1xufTtcbiJdLCJuYW1lcyI6WyJzb3J0S0QiLCJpZHMiLCJjb29yZHMiLCJub2RlU2l6ZSIsImxlZnQiLCJyaWdodCIsImRlcHRoIiwibSIsInNlbGVjdCIsImsiLCJpbmMiLCJuIiwieiIsIk1hdGgiLCJsb2ciLCJzIiwiZXhwIiwic2QiLCJzcXJ0IiwibWF4IiwiZmxvb3IiLCJtaW4iLCJ0IiwiaSIsImoiLCJzd2FwSXRlbSIsInN3YXAiLCJhcnIiLCJ0bXAiLCJzcURpc3QiLCJheCIsImF5IiwiYngiLCJieSIsImR4IiwiZHkiLCJkZWZhdWx0R2V0WCIsInAiLCJkZWZhdWx0R2V0WSIsIktEQnVzaCIsInBvaW50cyIsImdldFgiLCJnZXRZIiwiQXJyYXlUeXBlIiwiRmxvYXQ2NEFycmF5IiwidGhpcyIsIkluZGV4QXJyYXlUeXBlIiwibGVuZ3RoIiwiVWludDE2QXJyYXkiLCJVaW50MzJBcnJheSIsInNvcnQiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwieCIsInkiLCJzdGFjayIsInJlc3VsdCIsImF4aXMiLCJwb3AiLCJwdXNoIiwibmV4dEF4aXMiLCJyYW5nZSIsInIiLCJxeCIsInF5IiwicjIiLCJ3aXRoaW4iLCJkZWZhdWx0T3B0aW9ucyIsIm1pblpvb20iLCJtYXhab29tIiwibWluUG9pbnRzIiwicmFkaXVzIiwiZXh0ZW50IiwiZ2VuZXJhdGVJZCIsInJlZHVjZSIsIm1hcCIsInByb3BzIiwiZnJvdW5kIiwiRmxvYXQzMkFycmF5IiwiU3VwZXJjbHVzdGVyIiwib3B0aW9ucyIsImV4dGVuZCIsIk9iamVjdCIsImNyZWF0ZSIsInRyZWVzIiwiQXJyYXkiLCJjb25zb2xlIiwidGltZSIsInRpbWVySWQiLCJjbHVzdGVycyIsImdlb21ldHJ5IiwiY3JlYXRlUG9pbnRDbHVzdGVyIiwidGltZUVuZCIsIm5vdyIsIkRhdGUiLCJfY2x1c3RlciIsImJib3giLCJ6b29tIiwibWluTG5nIiwibWluTGF0IiwibWF4TG5nIiwibWF4TGF0IiwiZWFzdGVybkhlbSIsImdldENsdXN0ZXJzIiwid2VzdGVybkhlbSIsImNvbmNhdCIsInRyZWUiLCJfbGltaXRab29tIiwibG5nWCIsImxhdFkiLCJpZCIsImMiLCJudW1Qb2ludHMiLCJnZXRDbHVzdGVySlNPTiIsImluZGV4IiwiY2x1c3RlcklkIiwib3JpZ2luSWQiLCJfZ2V0T3JpZ2luSWQiLCJvcmlnaW5ab29tIiwiX2dldE9yaWdpblpvb20iLCJlcnJvck1zZyIsIkVycm9yIiwib3JpZ2luIiwicG93IiwiY2hpbGRyZW4iLCJwYXJlbnRJZCIsImxpbWl0Iiwib2Zmc2V0IiwibGVhdmVzIiwiX2FwcGVuZExlYXZlcyIsInoyIiwidG9wIiwiYm90dG9tIiwidGlsZSIsImZlYXR1cmVzIiwiX2FkZFRpbGVGZWF0dXJlcyIsImV4cGFuc2lvblpvb20iLCJnZXRDaGlsZHJlbiIsInByb3BlcnRpZXMiLCJjbHVzdGVyX2lkIiwic2tpcHBlZCIsImNoaWxkIiwiY2x1c3RlciIsInBvaW50X2NvdW50IiwiaXNDbHVzdGVyIiwidGFncyIsInB4IiwicHkiLCJnZXRDbHVzdGVyUHJvcGVydGllcyIsImNvb3JkaW5hdGVzIiwiZiIsInR5cGUiLCJyb3VuZCIsInVuZGVmaW5lZCIsIm5laWdoYm9ySWRzIiwibnVtUG9pbnRzT3JpZ2luIiwibmVpZ2hib3JJZCIsImIiLCJ3eCIsInd5IiwiY2x1c3RlclByb3BlcnRpZXMiLCJfbWFwIiwibnVtUG9pbnRzMiIsImNyZWF0ZUNsdXN0ZXIiLCJwb2ludCIsImNsb25lIiwib3JpZ2luYWwiLCJJbmZpbml0eSIsInlMYXQiLCJjb3VudCIsImFiYnJldiIsInBvaW50X2NvdW50X2FiYnJldmlhdGVkIiwibG5nIiwibGF0Iiwic2luIiwiUEkiLCJ5MiIsImF0YW4iLCJkZXN0Iiwic3JjIiwiX19yZXN0IiwiZSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIkNsdXN0ZXIiLCJtYXJrZXJzIiwicG9zaXRpb24iLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwiX3Bvc2l0aW9uIiwiYm91bmRzIiwibWFya2VyIiwiZ2V0UG9zaXRpb24iLCJMYXRMbmdCb3VuZHMiLCJnZXRDZW50ZXIiLCJmaWx0ZXIiLCJnZXRWaXNpYmxlIiwic2V0TWFwIiwiQWJzdHJhY3RBbGdvcml0aG0iLCJub29wIiwiU3VwZXJDbHVzdGVyQWxnb3JpdGhtIiwiX2EiLCJzdXBlckNsdXN0ZXIiLCJTdXBlckNsdXN0ZXIiLCJzdGF0ZSIsImlucHV0IiwiY2hhbmdlZCIsImVxdWFsIiwibG9hZCIsImdldFpvb20iLCJ0cmFuc2Zvcm1DbHVzdGVyIiwiYmluZCIsImdldExlYXZlcyIsImxlYWYiLCJDbHVzdGVyU3RhdHMiLCJzdW0iLCJjbHVzdGVyTWFya2VyQ291bnRzIiwiYSIsImNsdXN0ZXJNYXJrZXJTdW0iLCJtZWFuIiwiRGVmYXVsdFJlbmRlcmVyIiwic3RhdHMiLCJjb2xvciIsInN2ZyIsIndpbmRvdyIsImJ0b2EiLCJNYXJrZXIiLCJpY29uIiwidXJsIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJsYWJlbCIsInRleHQiLCJTdHJpbmciLCJmb250U2l6ZSIsInRpdGxlIiwiekluZGV4IiwiTnVtYmVyIiwiTUFYX1pJTkRFWCIsIk1hcmtlckNsdXN0ZXJlckV2ZW50cyIsIk92ZXJsYXlWaWV3U2FmZSIsInR5cGUxIiwidHlwZTIiLCJwcm9wZXJ0eSIsIk92ZXJsYXlWaWV3IiwiZGVmYXVsdE9uQ2x1c3RlckNsaWNrSGFuZGxlciIsIl8iLCJmaXRCb3VuZHMiLCJNYXJrZXJDbHVzdGVyZXIiLCJhbGdvcml0aG0iLCJyZW5kZXJlciIsIm9uQ2x1c3RlckNsaWNrIiwibm9EcmF3IiwiaW5jbHVkZXMiLCJyZW5kZXIiLCJmb3JFYWNoIiwiYWRkTWFya2VyIiwic3BsaWNlIiwicmVtb3ZlZCIsInJlbW92ZU1hcmtlciIsImdldE1hcCIsIk1hcCIsImdldFByb2plY3Rpb24iLCJldmVudCIsInRyaWdnZXIiLCJDTFVTVEVSSU5HX0JFR0lOIiwiY2FsY3VsYXRlIiwibWFwQ2FudmFzUHJvamVjdGlvbiIsInJlc2V0IiwicmVuZGVyQ2x1c3RlcnMiLCJDTFVTVEVSSU5HX0VORCIsImlkbGVMaXN0ZW5lciIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJkZWxldGUiLCJDTFVTVEVSX0NMSUNLIiwiQ2FwYWNpdG9yR29vZ2xlTWFwc1dlYiIsImdNYXBzUmVmIiwiY3Vyck1hcmtlcklkIiwib25DbHVzdGVyQ2xpY2tIYW5kbGVyIiwibWFwSWQiLCJnZXRJZEZyb21NYXAiLCJpdGVtcyIsIm1hcmtlcklkIiwiZ2V0SWRGcm9tTWFya2VyIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZXRUaXRsZSIsInNuaXBwZXQiLCJub3RpZnlMaXN0ZW5lcnMiLCJzaXplIiwiYXBpS2V5IiwibGliIiwibG9hZGVyIiwiTG9hZGVyIiwidmVyc2lvbiIsImxpYnJhcmllcyIsIl9hcmdzIiwibW92ZUNhbWVyYSIsImNlbnRlciIsImNvbmZpZyIsImNvb3JkaW5hdGUiLCJoZWFkaW5nIiwiYmVhcmluZyIsInRpbHQiLCJhbmdsZSIsInNldE1hcFR5cGVJZCIsIm1hcFR5cGUiLCJ0cmFmZmljTGF5ZXIiLCJUcmFmZmljTGF5ZXIiLCJlbmFibGVkIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJwb3MiLCJzZXRDZW50ZXIiLCJnZXRCb3VuZHMiLCJwYWRkaW5nIiwic291dGh3ZXN0IiwiZ2V0U291dGhXZXN0Iiwibm9ydGhlYXN0IiwiZ2V0Tm9ydGhFYXN0IiwibWFya2VySWRzIiwibWFya2VyQXJncyIsIm1hcmtlck9wdHMiLCJidWlsZE1hcmtlck9wdHMiLCJzZXRNYXJrZXJMaXN0ZW5lcnMiLCJtYXJrZXJDbHVzdGVyZXIiLCJpbXBvcnRHb29nbGVMaWIiLCJlbGVtZW50Iiwic2V0TWFwTGlzdGVuZXJzIiwibWFwSXRlbSIsImlubmVySFRNTCIsInVuYmluZEFsbCIsImdldE1hcEJvdW5kcyIsImdldEhlYWRpbmciLCJnZXRUaWx0IiwiaXNHZXN0dXJlIiwibGF0TG5nIiwiaWNvbkltYWdlIiwiaWNvblVybCIsImljb25TaXplIiwid2lkdGgiLCJoZWlnaHQiLCJhbmNob3IiLCJpY29uQW5jaG9yIiwiUG9pbnQiLCJpY29uT3JpZ2luIiwib3BhY2l0eSIsImRyYWdnYWJsZSIsIldlYlBsdWdpbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25zdHJ1Y3RvciIsImtleXMiLCJpc0FycmF5IiwiUmVnRXhwIiwic291cmNlIiwiZmxhZ3MiLCJ2YWx1ZU9mIiwidG9TdHJpbmciLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9